<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      
      <title>Progress reporting using plan-data -  - NSO 5.7 Development Guide</title>
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="index.html" title="NSO 5.7 Development Guide" />
      <link rel="up" href="ncs.development.reactive_fastmap.html" title="Reactive FASTMAP" />
      <link rel="prev" href="ncs.development.reactive_fastmap.html" title="Reactive FASTMAP" />
      <link rel="next" href="ncs.development.service_progress_monitoring.html" title="Service Progress Monitoring" />
      <meta xmlns="" name="Section-title" content="Progress reporting using plan-data" /><script xmlns="" type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-22003";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><link xmlns="" rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/css/positioning.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><style xmlns="" type="text/css">
      
      #noscript{
      font-weight:bold;
      background-color: #55AA55;
      font-weight: bold;
      height: 25spx;
      z-index: 3000;
      top:0px;
      width:100%;
      position: relative;
      border-bottom: solid 5px black;
      text-align:center;
      color: white;
      }
      
      input {
      margin-bottom: 5px;
      margin-top: 2px;
      }
      .folder {
      display: block;
      height: 22px;
      padding-left: 20px;
      background: transparent url(common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
      }
      span.contentsTab {
      padding-left: 20px;
      background: url(common/images/toc-icon.png) no-repeat 0 center;
      }
      span.searchTab {
      padding-left: 20px;
      background: url(common/images/search-icon.png) no-repeat 0 center;
      }
      
      /* Overide jquery treeview's defaults for ul. */
      .treeview ul {
      background-color: transparent;
      margin-top: 4px;
      }		
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #D8D8D8;
      }
      .treeview .hover { color: black; }
      .filetree li span a { text-decoration: none; font-size: 12px; color: #517291; }
      
      /* Override jquery-ui's default css customizations. These are supposed to take precedence over those.*/
      .ui-widget-content {
      border: 0px; 
      background: none; 
      color: none;     
      }
      .ui-widget-header {
      color: #e9e8e9;
      border-left: 1px solid #e5e5e5;
      border-right: 1px solid #e5e5e5;
      border-bottom: 1px solid #bbc4c5;
      border-top: 4px solid #e5e5e5;
      border: medium none;
      background: #F4F4F4; /* old browsers */
      background: -moz-linear-gradient(top, #F4F4F4 0%, #E6E4E5 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F4F4F4), color-stop(100%,#E6E4E5)); /* webkit */    
      font-weight: none;
      }
      .ui-widget-header a { color: none; }
      .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default { 
      border: none; background: none; font-weight: none; color: none; }
      .ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited { color: black; text-decoration: none; }
      .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus { border: none; background: none; font-weight: none; color: none; }
      
      .ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active { border: none; background: none; font-weight: none; color: none; }
      .ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited { 
      color: black; text-decoration: none; 	
      background: #C6C6C6; /* old browsers */
      background: -moz-linear-gradient(top, #C6C6C6 0%, #D8D8D8 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#C6C6C6), color-stop(100%,#D8D8D8)); /* webkit */
      -webkit-border-radius:15px; -moz-border-radius:10px;
      border: 1px solid #f1f1f1;
      }    
      .ui-corner-all { border-radius: 0 0 0 0; }
      
      .ui-tabs { padding: .2em;}
      .ui-tabs .ui-tabs-nav li { top: 0px; margin: -2px 0 1px; text-transform: uppercase; font-size: 10.5px;}
      .ui-tabs .ui-tabs-nav li a { padding: .25em 2em .25em 1em; margin: .5em; text-shadow: 0 1px 0 rgba(255,255,255,.5); }
      /**
      *	Basic Layout Theme
      * 
      *	This theme uses the default layout class-names for all classes
      *	Add any 'custom class-names', from options: paneClass, resizerClass, togglerClass
      */
      
      .ui-layout-pane { /* all 'panes' */ 
      background: #FFF; 
      border: 1px solid #BBB; 
      padding: 05x; 
      overflow: auto;
      } 
      
      .ui-layout-resizer { /* all 'resizer-bars' */ 
      background: #DDD; 
      top:100px
      } 
      
      .ui-layout-toggler { /* all 'toggler-buttons' */ 
      background: #AAA; 
      } 
      
    </style>
      <!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
	<![endif]--><script xmlns="" type="text/javascript" src="common/browserDetect.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery-1.7.2.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.ui.all.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.cookie.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/layout/jquery.layout.js">
         <!----></script><style type="text/css">
      
      #header {
      /* background: url("../images/header-bg.png") scroll top left repeat-x #4d8c83; */
      background: transparent;
      }
      #leftnavigation {
      /* background-color: #ededed!important; */
      background-color: transparent;
      }
      #navheader {
      visibility: hidden;
      }
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #FFFFFF; /*but must be changed in main.js as well*/
      }
      .filetree span.file {
      /* background: url(images/file.gif) 0 0 no-repeat; */
      background: initial;
      }
      .filetree span.folder, .filetree span.file {
      padding: 1px 0 1px 7px;
      display: block;
      }

      /* borrowed from cisco: clientlib.css */
      .footer {
      margin: 28px 30px 0 15px;
      font-size: 80%;
      line-height: 120%;
      border-top: 1px solid #ccc;
      padding-top: 7px;
      color: #999;
      }
      .footer #footer-legal{display:inline;padding-bottom:18px}
      #framework-footer{margin:0;padding:0 0 15px 0;min-width:900px;width:100%}
      .footer a,.footer a:visited{color:#999}

      /* from ccimr.css */
      a:active  { color: #3366CC}
      a:hover   { color: #3366CC}
      a:link    { color: #3366CC}
      a:visited { color: #3366CC}

      #header img {
      float: left;
      margin-left: 20px;
      margin-top: 0px;
      }

      #header h1 {
      color: #336666;
      margin-top: 4px;
      }
      #content h1, #content h2 {
      color: #336666;
      }
      .title {
      color: #336666;
      }
      p, pre {
      margin-left: 0.1in;
      }
      p, ul, ol, li {
        font-size: 95%;
        font-family: Arial, Helvetica, sans-serif;
        margin-top: 1px;
      }
      body {
        font: 80.5% Arial, Helvetica, sans-serif;
      }
      ol {
      display: block;
      list-style-type: decimal;
      -webkit-margin-before: 1em;
      -webkit-margin-after: 1em;
      -webkit-margin-start: 0px;
      -webkit-margin-end: 0px;
      -webkit-padding-start: 40px;
      border: 1;
      }
    </style></head>
   <body>
      <noscript>
         <div id="noscript">JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.</div>
      </noscript>
      <div id="header"><a href="index.html"><img style="margin-right: 2px; width: 110; height: 73; padding-right: 25px; padding-top: 8px" align="right" src="common/images/logo.gif" alt="Cisco Systems, Inc." /></a><h1>NSO 5.7 Development Guide<br />
                Reactive FASTMAP
              
         </h1>
         <div id="navheader">
            <!---->
            <table class="navLinks">
               <tr>
                  <td><a id="showHideButton" href="#" onclick="myLayout.toggle('west')" class="pointLeft" tabindex="5" title="Hide TOC tree">Sidebar
                                                    </a></td>
                  <td><a accesskey="p" class="navLinkPrevious" tabindex="5" href="ncs.development.reactive_fastmap.html">Prev</a>
                                                             |
                                                             <a accesskey="u" class="navLinkUp" tabindex="5" href="ncs.development.reactive_fastmap.html">Up</a>
                                                         |
                                                         <a accesskey="n" class="navLinkNext" tabindex="5" href="ncs.development.service_progress_monitoring.html">Next</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div id="content">
         <div class="sect2">
            <div xmlns="" class="titlepage">
               <div>
                  <div>
                     <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ncs.development.reactive_fastmap.plan"></a>Progress reporting using plan-data
                     </h3>
                  </div>
               </div>
            </div>
            <div class="toc">
               <dl class="toc">
                  <dt><span class="sect3"><a href="ncs.development.reactive_fastmap.plan.html#d0e14789">Example: use of plan-data in the virtual-mpls-vpn</a></span></dt>
               </dl>
            </div>
            <p>
                       Since the life-cycle of a Reactive FASTMAP service is more
                       complex, there is also a need to report the progress of the
                       service in addition to the success or failure of individual
                       transactions.
                       A Reactive FASTMAP service is expected to be
                       designed with a self-sustained chain of <code class="code">reactive-re-deploy</code>
                       until the service has completed. If this chain of
                       <code class="code">reactive-re-deploy</code> is broken the service will
                       fail to complete even though no transaction failure has occurred.
                     
            </p>
            <p>
                       To support Reactive FASTMAP service progress reporting there
                       is a YANG grouping, <code class="code">ncs:plan-data</code>, and Java API
                       utility <code class="code">PlanComponent</code>. It is a recommendation to
                       implement this into the service to promote a "standardized"
                       view of progress reporting.
                     
            </p>
            <p>
                       The YANG submodule defining the <code class="code">ncs:plan-data</code>
                       grouping is named tailf-ncs-plan.yang and contains the following:
               
                       
            </p><pre class="programlisting"><strong xmlns="" class="hl-keyword">submodule</strong> tailf-ncs-plan {
  yang-version <span xmlns="" class="hl-number">1.1</span>;
  belongs-to tailf-ncs {
    <strong xmlns="" class="hl-keyword">prefix</strong> ncs;
  }

  <strong xmlns="" class="hl-keyword">import</strong> ietf-yang-types {
    <strong xmlns="" class="hl-keyword">prefix</strong> yang;
  }

  <strong xmlns="" class="hl-keyword">import</strong> tailf-common {
    <strong xmlns="" class="hl-keyword">prefix</strong> tailf;
  }

  <strong xmlns="" class="hl-keyword">include</strong> tailf-ncs-common;
  <strong xmlns="" class="hl-keyword">include</strong> tailf-ncs-services;
  <strong xmlns="" class="hl-keyword">include</strong> tailf-ncs-devices;
  <strong xmlns="" class="hl-keyword">include</strong> tailf-ncs-log;

  <strong xmlns="" class="hl-keyword">organization</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Tail-f Systems"</em></strong>;

  <strong xmlns="" class="hl-keyword">description</strong>
    <strong xmlns="" class="hl-string"><em style="color:red">"This submodule contains a collection of YANG definitions for
</em></strong>     configuring plans in NCS.

     Copyright <span xmlns="" class="hl-number">2016</span>-<span xmlns="" class="hl-number">2021</span> Cisco Systems, Inc.
     All rights reserved.
     Permission is hereby granted to redistribute this file without
     modification.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2021</span>-<span xmlns="" class="hl-number">12</span>-<span xmlns="" class="hl-number">17</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-5.7.
</em></strong>
       Non-backwards-compatible changes have been introduced.

       Obsoleted the usage of the <strong xmlns="" class="hl-string"><em style="color:red">'service-commit-queue'</em></strong> <strong xmlns="" class="hl-keyword">grouping</strong>.

       Added YANG extensions <strong xmlns="" class="hl-string"><em style="color:red">'all'</em></strong> and <strong xmlns="" class="hl-string"><em style="color:red">'any'</em></strong>.

       Added YANG extensions <strong xmlns="" class="hl-string"><em style="color:red">'all'</em></strong> and <strong xmlns="" class="hl-string"><em style="color:red">'any'</em></strong> as valid substatements
       to the <strong xmlns="" class="hl-string"><em style="color:red">'pre-condition'</em></strong> YANG <strong xmlns="" class="hl-keyword">extension</strong>.

       Added <strong xmlns="" class="hl-keyword">grouping</strong> <strong xmlns="" class="hl-string"><em style="color:red">'pre-condition-grouping'</em></strong> that contains
       data to express nano-service pre-conditions.

       Added <strong xmlns="" class="hl-keyword">status</strong> obsolete to leafs <strong xmlns="" class="hl-string"><em style="color:red">'create-monitor'</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">'create-trigger-expr'</em></strong>,
       <strong xmlns="" class="hl-string"><em style="color:red">'delete-monitor'</em></strong> and <strong xmlns="" class="hl-string"><em style="color:red">'delete-trigger-expr'</em></strong> in the <strong xmlns="" class="hl-string"><em style="color:red">'pre-conditions'</em></strong>
       <strong xmlns="" class="hl-keyword">container</strong> in the <strong xmlns="" class="hl-string"><em style="color:red">'nano-plan-components'</em></strong> <strong xmlns="" class="hl-keyword">grouping</strong>.

       Added containers <strong xmlns="" class="hl-string"><em style="color:red">'create'</em></strong> and <strong xmlns="" class="hl-string"><em style="color:red">'delete'</em></strong> to the <strong xmlns="" class="hl-string"><em style="color:red">'pre-conditions'</em></strong>
       containers in the <strong xmlns="" class="hl-string"><em style="color:red">'nano-plan-components'</em></strong> <strong xmlns="" class="hl-keyword">grouping</strong>. Both of the
       new containers contain the <strong xmlns="" class="hl-keyword">grouping</strong> <strong xmlns="" class="hl-string"><em style="color:red">'pre-condition-grouping'</em></strong>.

       Add the converge-on-re-deploy <strong xmlns="" class="hl-keyword">extension</strong>.

       Updated plan-location <strong xmlns="" class="hl-keyword">type</strong> to yang:xpath1.<span xmlns="" class="hl-number">0.</span>

       Update the <strong xmlns="" class="hl-keyword">description</strong> of the self-as-service-<strong xmlns="" class="hl-keyword">status</strong> <strong xmlns="" class="hl-keyword">extension</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2021</span>-<span xmlns="" class="hl-number">09</span>-<span xmlns="" class="hl-number">02</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-5.6.
</em></strong>
       Updated the <strong xmlns="" class="hl-keyword">description</strong> and added the <strong xmlns="" class="hl-string"><em style="color:red">'sync'</em></strong> parameter to the
       /zombies/service/reactive-re-deploy action.

       Remove <strong xmlns="" class="hl-keyword">mandatory</strong> statement from <strong xmlns="" class="hl-keyword">status</strong> <strong xmlns="" class="hl-keyword">leaf</strong> in plan-state-change
       <strong xmlns="" class="hl-keyword">notification</strong>.

       Added commit-queue <strong xmlns="" class="hl-keyword">container</strong> and trace-id <strong xmlns="" class="hl-keyword">leaf</strong> to plan-state-change
       <strong xmlns="" class="hl-keyword">notification</strong>.

       Remove <strong xmlns="" class="hl-keyword">unique</strong> statement from /services/plan-notifications/subscription.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2021</span>-<span xmlns="" class="hl-number">02</span>-<span xmlns="" class="hl-number">09</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-5.5.1.
</em></strong>
       Added the <strong xmlns="" class="hl-string"><em style="color:red">'ncs-commit-params'</em></strong> <strong xmlns="" class="hl-keyword">grouping</strong> to the
       /zombies/service/re-deploy action <strong xmlns="" class="hl-keyword">input</strong> parameters.

       Added /zombies/service/latest-commit-parameters <strong xmlns="" class="hl-keyword">leaf</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2020</span>-<span xmlns="" class="hl-number">11</span>-<span xmlns="" class="hl-number">26</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-5.5.
</em></strong>
       Add <strong xmlns="" class="hl-keyword">when</strong> statement to variables.

       Add self-as-service-<strong xmlns="" class="hl-keyword">status</strong> to plan-outline.

       Added the ncs-commit-params <strong xmlns="" class="hl-keyword">grouping</strong> to the force-back-track <strong xmlns="" class="hl-keyword">input</strong>
       parameters.

       Add new <strong xmlns="" class="hl-keyword">extension</strong> deprecates-component and a version <strong xmlns="" class="hl-keyword">leaf</strong> to
       nano components.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2020</span>-<span xmlns="" class="hl-number">06</span>-<span xmlns="" class="hl-number">25</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-5.4.
</em></strong>
       Add trigger-on-delete trigger <strong xmlns="" class="hl-keyword">type</strong> to precondition monitors.

       Add sync option to post actions.

       Remove the experimental tag from the plan-location statement.

       Add purge action to side-effect queue and make the automatic
       cleanup of the side-effect queue configurable.

       Add force-commit to create and delete.

       Add zombies/service/pending-delete <strong xmlns="" class="hl-keyword">leaf</strong>.

       Add zombies/service/plan/commit-queue <strong xmlns="" class="hl-keyword">container</strong>.

       Use service-commit-queue <strong xmlns="" class="hl-keyword">grouping</strong> under zombies/service.

       Add load-device-<strong xmlns="" class="hl-keyword">config</strong> action under
       commit-queue/queue-item/failed-device for zombies.

       Add canceled as a valid <strong xmlns="" class="hl-keyword">value</strong> of side-effect-queue/<strong xmlns="" class="hl-keyword">status</strong>.
       The <strong xmlns="" class="hl-keyword">status</strong> of a side-effect is canceled if a related
       commit-queue item has failed. Canceled side-effects are
       cleaned up as part of the side-effect queue<strong xmlns="" class="hl-string"><em style="color:red">'s automatic cleanup.";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2019</span>-<span xmlns="" class="hl-number">11</span>-<span xmlns="" class="hl-number">28</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-5.3.
</em></strong>
       Added dry-run option to the zombie resurrect action.

       Added service log and error-info to zombies.

       Added reactive-re-deploy action to revive and
       reactive-re-deploy a zombie.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2019</span>-<span xmlns="" class="hl-number">04</span>-<span xmlns="" class="hl-number">09</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-5.1.
</em></strong>
       Added operation <strong xmlns="" class="hl-keyword">leaf</strong> to plan-state-change <strong xmlns="" class="hl-keyword">notification</strong> and to
       subscription <strong xmlns="" class="hl-keyword">list</strong>.

       Added ned-id-<strong xmlns="" class="hl-keyword">list</strong> in the service<strong xmlns="" class="hl-string"><em style="color:red">'s private data.";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2018</span>-<span xmlns="" class="hl-number">11</span>-<span xmlns="" class="hl-number">12</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-4.7.2.
</em></strong>
       Major changes to nano services.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2018</span>-<span xmlns="" class="hl-number">06</span>-<span xmlns="" class="hl-number">21</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-4.7.
</em></strong>
       Added commit-queue <strong xmlns="" class="hl-keyword">container</strong> in plan.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2017</span>-<span xmlns="" class="hl-number">03</span>-<span xmlns="" class="hl-number">16</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-4.4.
</em></strong>
       Added error-info <strong xmlns="" class="hl-keyword">container</strong> in plan for additional error information.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2016</span>-<span xmlns="" class="hl-number">11</span>-<span xmlns="" class="hl-number">24</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-4.3.
</em></strong>
       Major additions to this <strong xmlns="" class="hl-keyword">submodule</strong> to incorporate Nano Services.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2016</span>-<span xmlns="" class="hl-number">05</span>-<span xmlns="" class="hl-number">26</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Initial revision"</em></strong>;
  }


  <strong xmlns="" class="hl-keyword">typedef</strong> plan-xpath {
    <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This type represents an XPath 1.0 expression that is evaluated
</em></strong>       in the following context:

         o  The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are the prefixes defined
            in all YANG modules implemented, mapped to the <strong xmlns="" class="hl-keyword">namespace</strong>
            defined in the corresponding <strong xmlns="" class="hl-keyword">module</strong>.

         o  The set of variable bindings contains all variables
            declared with <strong xmlns="" class="hl-string"><em style="color:red">'ncs:variable'</em></strong> that are in scope, and all
            variables defined in the service code<strong xmlns="" class="hl-string"><em style="color:red">'s '</em></strong>opaque<strong xmlns="" class="hl-string"><em style="color:red">' key-value
</em></strong>            <strong xmlns="" class="hl-keyword">list</strong> (if any), and the following variables:

            <strong xmlns="" class="hl-string"><em style="color:red">'SERVICE'</em></strong>: a nodeset with the service instance node as the
                       only member, or no nodes if the service
                       instances is being deleted.

            <strong xmlns="" class="hl-string"><em style="color:red">'ZOMBIE'</em></strong>:  a nodeset with the service instance node as the
                       only member <strong xmlns="" class="hl-keyword">when</strong> it is being deleted, or no
                       nodes if the service instance exists.

            <strong xmlns="" class="hl-string"><em style="color:red">'PLAN'</em></strong>:    a nodeset with the <strong xmlns="" class="hl-string"><em style="color:red">'plan'</em></strong> <strong xmlns="" class="hl-keyword">container</strong> for the service
                       instance as the only member.


          o  The function library is the core function library.

          o  If this expression is in a descendant to a <strong xmlns="" class="hl-string"><em style="color:red">'ncs:foreach'</em></strong>
             statement, the context node is the node in the node set
             in the <strong xmlns="" class="hl-string"><em style="color:red">'ncs:foreach'</em></strong> result.  Otherwise, the context node
             is initially the service instance node.
       <strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Plan Component Types
   */</em>

  <strong xmlns="" class="hl-keyword">typedef</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>-t {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This is a base type from which all service specific plan components
</em></strong>       can be derived.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">type</strong> identityref {
      <strong xmlns="" class="hl-keyword">base</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>;
    }
  }

  <strong xmlns="" class="hl-keyword">identity</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"A service plan consists of several different plan components.
</em></strong>       Each plan component moves forward in the plan as the service
       comes closer to fulfillment.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">identity</strong> self {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"A service should when it constructs it's plan, include a column
</em></strong>       of <strong xmlns="" class="hl-keyword">type</strong> <strong xmlns="" class="hl-string"><em style="color:red">'self'</em></strong>, this column can be used by upper layer software to
       determine which state the service is in as a whole.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">base</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>;
  }


  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Plan States
   */</em>

  <strong xmlns="" class="hl-keyword">typedef</strong> plan-state-name-t {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This is a base type from which all plan component specific states can
</em></strong>       be derived.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">type</strong> identityref {
      <strong xmlns="" class="hl-keyword">base</strong> plan-state;
    }
  }

  <strong xmlns="" class="hl-keyword">typedef</strong> plan-state-operation-t {
    <strong xmlns="" class="hl-keyword">type</strong> enumeration {
      <strong xmlns="" class="hl-keyword">enum</strong> created {
        tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"plan_state_created"</em></strong>;
      }
      <strong xmlns="" class="hl-keyword">enum</strong> modified {
        tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"plan_state_modified"</em></strong>;
      }
      <strong xmlns="" class="hl-keyword">enum</strong> deleted {
        tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"plan_state_deleted"</em></strong>;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">typedef</strong> plan-state-<strong xmlns="" class="hl-keyword">status</strong>-t {
    <strong xmlns="" class="hl-keyword">type</strong> enumeration {
      <strong xmlns="" class="hl-keyword">enum</strong> not-reached;
      <strong xmlns="" class="hl-keyword">enum</strong> reached;
      <strong xmlns="" class="hl-keyword">enum</strong> failed {
        tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"plan_failed"</em></strong>;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">typedef</strong> side-effect-q-<strong xmlns="" class="hl-keyword">status</strong>-t {
    <strong xmlns="" class="hl-keyword">type</strong> enumeration {
      <strong xmlns="" class="hl-keyword">enum</strong> not-reached;
      <strong xmlns="" class="hl-keyword">enum</strong> reached;
      <strong xmlns="" class="hl-keyword">enum</strong> failed {
        tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"plan_failed"</em></strong>;
      }
      <strong xmlns="" class="hl-keyword">enum</strong> canceled {
        tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"effect_canceled"</em></strong>;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">typedef</strong> plan-state-action-<strong xmlns="" class="hl-keyword">status</strong>-t {
    <strong xmlns="" class="hl-keyword">type</strong> enumeration {
      <strong xmlns="" class="hl-keyword">enum</strong> not-reached;
      <strong xmlns="" class="hl-keyword">enum</strong> create-reached;
      <strong xmlns="" class="hl-keyword">enum</strong> delete-reached;
      <strong xmlns="" class="hl-keyword">enum</strong> failed {
        tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"plan_action_failed"</em></strong>;
      }
      <strong xmlns="" class="hl-keyword">enum</strong> create-init;
      <strong xmlns="" class="hl-keyword">enum</strong> delete-init;
    }
  }

  <strong xmlns="" class="hl-keyword">identity</strong> plan-state {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This is the base identity for plan states. A plan component in a
</em></strong>       plan goes through certain states, some, such as <strong xmlns="" class="hl-string"><em style="color:red">'init'</em></strong> and
       <strong xmlns="" class="hl-string"><em style="color:red">'ready'</em></strong>, are specified here, and the application augments these
       with app specific states.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">identity</strong> init {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"The init state in all plan state lists, primarily used as a
</em></strong>       place holder with a time stamp.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">base</strong> plan-state;
  }

  <strong xmlns="" class="hl-keyword">identity</strong> ready {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"The final state in a 'state list' in the plan"</em></strong>;
    <strong xmlns="" class="hl-keyword">base</strong> plan-state;
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Plan Notifications
   */</em>

  <strong xmlns="" class="hl-keyword">augment</strong> <strong xmlns="" class="hl-string"><em style="color:red">"/ncs:services"</em></strong> {
    <strong xmlns="" class="hl-keyword">container</strong> plan-notifications {
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Configuration to send plan-state-change notifications for
</em></strong>         plan state transitions. A <strong xmlns="" class="hl-keyword">notification</strong> can be configured to
         be sent <strong xmlns="" class="hl-keyword">when</strong> a specified service<strong xmlns="" class="hl-string"><em style="color:red">'s plan component enters a
</em></strong>         given state.

         The built in stream <strong xmlns="" class="hl-string"><em style="color:red">'service-state-changes'</em></strong> is used to send
         these notifications.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      <strong xmlns="" class="hl-keyword">list</strong> subscription {
        <strong xmlns="" class="hl-keyword">key</strong> name;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"A list of our plan notification subscriptions."</em></strong>;

        <strong xmlns="" class="hl-keyword">leaf</strong> name {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"A unique identifier for this subscription."</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> service-<strong xmlns="" class="hl-keyword">type</strong> {
          <strong xmlns="" class="hl-keyword">type</strong> tailf:node-instance-identifier;
          tailf:cli-completion-actionpoint <strong xmlns="" class="hl-string"><em style="color:red">"servicepoints-with-plan"</em></strong>;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The type of service. If not set, all service types are
</em></strong>             subscribed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
        <strong xmlns="" class="hl-keyword">leaf</strong> component-<strong xmlns="" class="hl-keyword">type</strong> {
          <strong xmlns="" class="hl-keyword">type</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>-t;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The type of component in the service's plan. If not set,
</em></strong>             all component types of the specified service types are
             subscribed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
        <strong xmlns="" class="hl-keyword">leaf</strong> state {
          <strong xmlns="" class="hl-keyword">type</strong> plan-state-name-t;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The name of the state for the component in the service's plan.
</em></strong>             If not set, all states of the specified service types and
             plan components are subscribed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
        <strong xmlns="" class="hl-keyword">leaf</strong> operation {
          <strong xmlns="" class="hl-keyword">type</strong> plan-state-operation-t;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The type of operation performed on the state(s) in the
</em></strong>             component(s). If not set, all operations are subscribed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
      }
    }
  }

  <strong xmlns="" class="hl-keyword">notification</strong> plan-state-change {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This notification indicates that the specified service's
</em></strong>       plan component has entered the given state.

       This <strong xmlns="" class="hl-keyword">notification</strong> is not sent unless the system has been
       configured to send the <strong xmlns="" class="hl-keyword">notification</strong> for the service <strong xmlns="" class="hl-keyword">type</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">leaf</strong> service {
      <strong xmlns="" class="hl-keyword">type</strong> instance-identifier;
      <strong xmlns="" class="hl-keyword">mandatory</strong> true;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"A reference to the service whose plan has been changed."</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">leaf</strong> component {
      <strong xmlns="" class="hl-keyword">type</strong> string;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Refers to the name of a component in the service's plan;
</em></strong>         plan/component/name.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    }
    <strong xmlns="" class="hl-keyword">leaf</strong> state {
      <strong xmlns="" class="hl-keyword">type</strong> plan-state-name-t;
      <strong xmlns="" class="hl-keyword">mandatory</strong> true;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Refers to the name of the new state for the component in
</em></strong>         the service<strong xmlns="" class="hl-string"><em style="color:red">'s plan;
</em></strong>         plan/component/state<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    }
    <strong xmlns="" class="hl-keyword">leaf</strong> operation {
      <strong xmlns="" class="hl-keyword">type</strong> plan-state-operation-t;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"The type of operation performed on the given state."</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">status</strong> {
      <strong xmlns="" class="hl-keyword">type</strong> plan-state-<strong xmlns="" class="hl-keyword">status</strong>-t;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Refers to the status of the new state for the component in
</em></strong>         the service<strong xmlns="" class="hl-string"><em style="color:red">'s plan;
</em></strong>         plan/component/state/<strong xmlns="" class="hl-keyword">status</strong><strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    }
    <strong xmlns="" class="hl-keyword">container</strong> commit-queue {
      <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"The service is being committed through the commit queue."</em></strong>;
      <strong xmlns="" class="hl-keyword">list</strong> queue-item {
        <strong xmlns="" class="hl-keyword">key</strong> id;
        max-elements <span xmlns="" class="hl-number">1</span>;
        <strong xmlns="" class="hl-keyword">leaf</strong> id {
          <strong xmlns="" class="hl-keyword">type</strong> uint64;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"If the queue item in the commit queue refers to this service
</em></strong>             this is the queue number.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
        <strong xmlns="" class="hl-keyword">leaf</strong> tag {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"Opaque tag set in the commit."</em></strong>;
        }
      }
    }
    <strong xmlns="" class="hl-keyword">leaf</strong> trace-id {
      <strong xmlns="" class="hl-keyword">type</strong> string;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"The trace id assigned to the commit that last changed
</em></strong>         the service instance.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    }
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Groupings
   */</em>

  <strong xmlns="" class="hl-keyword">grouping</strong> plan-data {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This grouping contains the plan data that can show the
</em></strong>       progress of a Reactive FASTMAP service. This <strong xmlns="" class="hl-keyword">grouping</strong> is optional
       and should only be used by services i.e lists or <strong xmlns="" class="hl-keyword">presence</strong> containers
       that <strong xmlns="" class="hl-keyword">uses</strong> the ncs:servicepoint callback<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">container</strong> plan {
      <strong xmlns="" class="hl-keyword">config</strong> false;
      tailf:cdb-oper {
        tailf:persistent true;
      }
      <strong xmlns="" class="hl-keyword">uses</strong> plan-components;
      <strong xmlns="" class="hl-keyword">container</strong> commit-queue {
        <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"The service is being committed through the commit queue."</em></strong>;
        <strong xmlns="" class="hl-keyword">list</strong> queue-item {
          <strong xmlns="" class="hl-keyword">key</strong> id;
          <strong xmlns="" class="hl-keyword">leaf</strong> id {
            <strong xmlns="" class="hl-keyword">type</strong> uint64;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"If the queue item in the commit queue refers to this service
</em></strong>               this is the queue number.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>          }
        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> failed {
        <strong xmlns="" class="hl-keyword">type</strong> empty;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"This leaf is present if any plan component in the plan is in
</em></strong>           a failed state; i.e., a state with <strong xmlns="" class="hl-keyword">status</strong> <strong xmlns="" class="hl-string"><em style="color:red">'failed'</em></strong>, or
           if the service failed to push its changes to the network.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      }
      <strong xmlns="" class="hl-keyword">container</strong> error-info {
        <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Additional info if plan has failed"</em></strong>;
        <strong xmlns="" class="hl-keyword">leaf</strong> message {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"An explanatory message for the failing plan."</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> log-entry {
          <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
            require-instance false;
          }
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"Reference to a service log entry with additional information."</em></strong>;
        }
      }
    }
    <strong xmlns="" class="hl-keyword">container</strong> plan-history {
      <strong xmlns="" class="hl-keyword">config</strong> false;
      tailf:cdb-oper {
        tailf:persistent true;
      }
      <strong xmlns="" class="hl-keyword">list</strong> plan {
        <strong xmlns="" class="hl-keyword">key</strong> time;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Every time the plan changes its structure, i.e., a
</em></strong>           plan component is added or deleted, or a state is added or
           deleted in a plan component, a copy of the old plan is stored
           in the plan history <strong xmlns="" class="hl-keyword">list</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
        <strong xmlns="" class="hl-keyword">leaf</strong> time {
          <strong xmlns="" class="hl-keyword">type</strong> yang:date-and-time;
          tailf:cli-<strong xmlns="" class="hl-keyword">value</strong>-display-template <strong xmlns="" class="hl-string"><em style="color:red">"$(.|datetime)"</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">uses</strong> plan-components;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> plan-components {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This grouping contains a list of components that reflects the
</em></strong>       different steps or stages that a Reactive FASTMAP service comprises.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">list</strong> component {
      ordered-by user;
      <strong xmlns="" class="hl-keyword">key</strong> name;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"A component has a type and a list of states.
</em></strong>         It is required that the first plan component is of <strong xmlns="" class="hl-keyword">type</strong> ncs:self.
         It is also required that the first state of a component is ncs:init
         and the last state is ncs:ready.
         A service can in addition to the <strong xmlns="" class="hl-string"><em style="color:red">'self'</em></strong> component have any number of
         components. These additional components will have types that are
         defined by user specified YANG identities.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
      <strong xmlns="" class="hl-keyword">uses</strong> plan-component-body {
        <strong xmlns="" class="hl-keyword">refine</strong> <strong xmlns="" class="hl-string"><em style="color:red">"state/status"</em></strong> {
          <strong xmlns="" class="hl-keyword">mandatory</strong> true;
        }
      }
    }
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> plan-component-body {
    <strong xmlns="" class="hl-keyword">leaf</strong> name {
      <strong xmlns="" class="hl-keyword">type</strong> string;
    }
    <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">type</strong> {
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"The plan component type is defined by an YANG identity.
</em></strong>         It is used to identify the characteristics of a certain component.
         Therefore, if two components in the same service are of the same
         <strong xmlns="" class="hl-keyword">type</strong> they should be identical with respect to number, <strong xmlns="" class="hl-keyword">type</strong> and order
         of their contained states.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
      <strong xmlns="" class="hl-keyword">type</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>-t;
      <strong xmlns="" class="hl-keyword">mandatory</strong> true;
    }
    <strong xmlns="" class="hl-keyword">list</strong> state {
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"A plan state represents a certain step or stage that a service needs
</em></strong>         to execute and/or reach. It is identified as an YANG <strong xmlns="" class="hl-keyword">identity</strong>.
         There are two predefined states ncs:init and ncs:ready which is the
         first respectively last state of a plan component.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
      ordered-by user;
      <strong xmlns="" class="hl-keyword">key</strong> name;
      <strong xmlns="" class="hl-keyword">leaf</strong> name {
        tailf:alt-name state;
        <strong xmlns="" class="hl-keyword">type</strong> plan-state-name-t;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">status</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"A plan state is always in one of three states 'not-reached' when
</em></strong>           the state has not been executed, <strong xmlns="" class="hl-string"><em style="color:red">'reached'</em></strong> <strong xmlns="" class="hl-keyword">when</strong> the state has been
           executed and <strong xmlns="" class="hl-string"><em style="color:red">'failed'</em></strong> it the state execution failed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
        <strong xmlns="" class="hl-keyword">type</strong> plan-state-<strong xmlns="" class="hl-keyword">status</strong>-t;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">when</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> yang:date-and-time;
        tailf:cli-<strong xmlns="" class="hl-keyword">value</strong>-display-template <strong xmlns="" class="hl-string"><em style="color:red">"$(.|datetime)"</em></strong>;
        <strong xmlns="" class="hl-keyword">when</strong> <strong xmlns="" class="hl-string"><em style="color:red">'../status != "not-reached"'</em></strong>;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The time this state was successfully reached or failed."</em></strong>;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> service-<strong xmlns="" class="hl-keyword">reference</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"If this component reflects the state of some other data, e.g
</em></strong>           an instantiated RFS, an instantiated CFS or something else, this
           optional field can be set to point to that instance<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
          require-instance false;
        }
        tailf:display-column-name <strong xmlns="" class="hl-string"><em style="color:red">"ref"</em></strong>;
      }
    }
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Nano-service related definitions
   */</em>

  <strong xmlns="" class="hl-keyword">grouping</strong> force-back-track-action {
    tailf:action force-back-track {
      tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"Force a component to back-track"</em></strong>;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Forces an existing component to start back-tracking"</em></strong>;
      tailf:actionpoint ncsinternal {
        tailf:internal;
      }
      <strong xmlns="" class="hl-keyword">input</strong> {
        <strong xmlns="" class="hl-keyword">leaf</strong> back-tracking-goal {
          <strong xmlns="" class="hl-keyword">type</strong> leafref {
            <strong xmlns="" class="hl-keyword">path</strong> <strong xmlns="" class="hl-string"><em style="color:red">"../../state/name"</em></strong>;
          }
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"Target state for back-track."</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">uses</strong> ncs-commit-params;
      }
      <strong xmlns="" class="hl-keyword">output</strong> {
        <strong xmlns="" class="hl-keyword">leaf</strong> result {
          <strong xmlns="" class="hl-keyword">type</strong> boolean;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"Set to true if the forced back tracking was successful,
</em></strong>             otherwise false.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
        <strong xmlns="" class="hl-keyword">leaf</strong> info {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"A message explaining why the forced back tracking wasn't
</em></strong>             successful.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
      }
    }
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> post-action-<strong xmlns="" class="hl-keyword">input</strong>-params {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"A Nano service post-action can choose to implement this grouping
</em></strong>       as its <strong xmlns="" class="hl-keyword">input</strong> parameters. If so the action will be invoked with:
         * opaque-props    - The <strong xmlns="" class="hl-keyword">list</strong> of name, <strong xmlns="" class="hl-keyword">value</strong> pairs in the service opaque
         * component-props - The <strong xmlns="" class="hl-keyword">list</strong> of component properties for
                             the invoking plan component state.

       post-actions that does not implement this <strong xmlns="" class="hl-keyword">grouping</strong> as its <strong xmlns="" class="hl-keyword">input</strong>
       parameters will be invoked with an empty parameter <strong xmlns="" class="hl-keyword">list</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">list</strong> opaque-props {
      <strong xmlns="" class="hl-keyword">key</strong> name;
      <strong xmlns="" class="hl-keyword">leaf</strong> name {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">value</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    <strong xmlns="" class="hl-keyword">list</strong> component-props {
      <strong xmlns="" class="hl-keyword">key</strong> name;
      <strong xmlns="" class="hl-keyword">leaf</strong> name {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">value</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> nano-plan-data {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This grouping is required for nano services. It replaces the
</em></strong>       plan-data <strong xmlns="" class="hl-keyword">grouping</strong>. This <strong xmlns="" class="hl-keyword">grouping</strong> contains an executable plan
       that has additional state data which is internally used to
       control service execution.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">uses</strong> nano-plan;
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> nano-plan {
    <strong xmlns="" class="hl-keyword">container</strong> plan {
      <strong xmlns="" class="hl-keyword">config</strong> false;
      tailf:cdb-oper {
        tailf:persistent true;
      }
      <strong xmlns="" class="hl-keyword">uses</strong> nano-plan-components {
        <strong xmlns="" class="hl-keyword">augment</strong> <strong xmlns="" class="hl-string"><em style="color:red">"component"</em></strong> {
          <strong xmlns="" class="hl-keyword">uses</strong> force-back-track-action;
        }
      }
      <strong xmlns="" class="hl-keyword">container</strong> commit-queue {
        <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"The service is being committed through the commit queue."</em></strong>;
        <strong xmlns="" class="hl-keyword">list</strong> queue-item {
          <strong xmlns="" class="hl-keyword">key</strong> id;
          <strong xmlns="" class="hl-keyword">leaf</strong> id {
            <strong xmlns="" class="hl-keyword">type</strong> uint64;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"If the queue item in the commit queue refers to this service
</em></strong>               this is the queue number.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>          }
        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> failed {
        <strong xmlns="" class="hl-keyword">type</strong> empty;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"This leaf is present if any plan component in the plan is in
</em></strong>           a failed state; i.e., a state with <strong xmlns="" class="hl-keyword">status</strong> <strong xmlns="" class="hl-string"><em style="color:red">'failed'</em></strong>, or
           if the service failed to push its changes to the network.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      }
      <strong xmlns="" class="hl-keyword">container</strong> error-info {
        <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Additional info if plan has failed"</em></strong>;
        <strong xmlns="" class="hl-keyword">leaf</strong> message {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"An explanatory message for the failing plan."</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> log-entry {
          <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
            require-instance false;
          }
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"Reference to a service log entry with additional information."</em></strong>;
        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> deleting {
        tailf:hidden fastmap-private;
        <strong xmlns="" class="hl-keyword">type</strong> empty;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> service-location {
        tailf:hidden fastmap-private;
        <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
          require-instance false;
        }
      }
    }
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> nano-plan-components {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This grouping contains a list of components that reflects the
</em></strong>       different steps or stages that a nano service comprises.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">list</strong> component {
      ordered-by user;
      <strong xmlns="" class="hl-keyword">key</strong> <strong xmlns="" class="hl-string"><em style="color:red">"type name"</em></strong>;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"A component has a type and a list of states.  It is required
</em></strong>         that the first plan component is of <strong xmlns="" class="hl-keyword">type</strong> ncs:self.  It is
         also required that the first state of a component is ncs:init
         and the last state is ncs:ready.  A service can in addition
         to the <strong xmlns="" class="hl-string"><em style="color:red">'self'</em></strong> component have any number of components. These
         additional components will have types that are defined by
         user specified YANG identities.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
      <strong xmlns="" class="hl-keyword">uses</strong> plan-component-body {
        <strong xmlns="" class="hl-keyword">augment</strong> <strong xmlns="" class="hl-string"><em style="color:red">"state"</em></strong> {
          <strong xmlns="" class="hl-keyword">leaf</strong> create-cb {
            tailf:hidden full;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"indicate if a create callback should be registered
</em></strong>               for this state<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            <strong xmlns="" class="hl-keyword">type</strong> boolean;
          }

          <strong xmlns="" class="hl-keyword">leaf</strong> create-force-commit {
            tailf:hidden full;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Indicate if the current transaction should be commited before
</em></strong>               running any later states.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            <strong xmlns="" class="hl-keyword">type</strong> boolean;
            <strong xmlns="" class="hl-keyword">default</strong> false;
          }

          <strong xmlns="" class="hl-keyword">leaf</strong> delete-cb {
            tailf:hidden full;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"indicate if a delete callback should be registered
</em></strong>               for this state<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            <strong xmlns="" class="hl-keyword">type</strong> boolean;
          }

          <strong xmlns="" class="hl-keyword">leaf</strong> delete-force-commit {
            tailf:hidden full;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Indicate if the current transaction should be commited before
</em></strong>               running any later states.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            <strong xmlns="" class="hl-keyword">type</strong> boolean;
            <strong xmlns="" class="hl-keyword">default</strong> false;
          }

          <strong xmlns="" class="hl-keyword">container</strong> pre-conditions {
            tailf:display-groups <strong xmlns="" class="hl-string"><em style="color:red">"summary"</em></strong>;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Pre-conditions for a state controls whether or not a
</em></strong>               state should be executed. There are separate conditions
               for the <strong xmlns="" class="hl-string"><em style="color:red">'create'</em></strong> and <strong xmlns="" class="hl-string"><em style="color:red">'delete'</em></strong> <strong xmlns="" class="hl-keyword">case</strong>. At create the
               create conditions checked and if possible executed with
               the ultimate goal for the state of having <strong xmlns="" class="hl-keyword">status</strong>
               <strong xmlns="" class="hl-string"><em style="color:red">'reached'</em></strong>. At the <strong xmlns="" class="hl-string"><em style="color:red">'delete'</em></strong> <strong xmlns="" class="hl-keyword">case</strong> the delete conditions
               control whether the state changes should be deleted
               with the ultimate goal of the state having <strong xmlns="" class="hl-keyword">status</strong>
               <strong xmlns="" class="hl-string"><em style="color:red">'not-reached'</em></strong><strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
            <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Preconditions for executing the plan state"</em></strong>;

            <em xmlns="" class="hl-comment" style="color: silver">// Kept for backwards compatability</em>
            <strong xmlns="" class="hl-keyword">leaf</strong> create-trigger-expr {
              <strong xmlns="" class="hl-keyword">status</strong> obsolete;
              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }

            <strong xmlns="" class="hl-keyword">leaf</strong> create-monitor {
              <strong xmlns="" class="hl-keyword">status</strong> obsolete;
              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }

            <strong xmlns="" class="hl-keyword">leaf</strong> delete-trigger-expr {
              <strong xmlns="" class="hl-keyword">status</strong> obsolete;
              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }

            <strong xmlns="" class="hl-keyword">leaf</strong> delete-monitor {
              <strong xmlns="" class="hl-keyword">status</strong> obsolete;
              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }

            <strong xmlns="" class="hl-keyword">grouping</strong> pre-condition-<strong xmlns="" class="hl-keyword">grouping</strong> {
              <strong xmlns="" class="hl-keyword">leaf</strong> fun {
                <strong xmlns="" class="hl-keyword">type</strong> enumeration {
                  <strong xmlns="" class="hl-keyword">enum</strong> all {
                    tailf:code-name fun-all;
                  }
                  <strong xmlns="" class="hl-keyword">enum</strong> any {
                    tailf:code-name fun-any;
                  }
                }
              }
              <strong xmlns="" class="hl-keyword">list</strong> pre-condition {
                <strong xmlns="" class="hl-keyword">key</strong> id;
                <strong xmlns="" class="hl-keyword">leaf</strong> id {
                  <strong xmlns="" class="hl-keyword">type</strong> string;
                }
                <strong xmlns="" class="hl-keyword">leaf</strong> monitor {
                  <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
                }
                <strong xmlns="" class="hl-keyword">leaf</strong> trigger-expr {
                  <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
                }
              }
            }
            <strong xmlns="" class="hl-keyword">container</strong> create {
              <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Create precondition exists"</em></strong>;
              <strong xmlns="" class="hl-keyword">uses</strong> pre-condition-<strong xmlns="" class="hl-keyword">grouping</strong>;
            }
            <strong xmlns="" class="hl-keyword">container</strong> delete {
              <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Delete precondition exists"</em></strong>;
              <strong xmlns="" class="hl-keyword">uses</strong> pre-condition-<strong xmlns="" class="hl-keyword">grouping</strong>;
            }
          }

          <strong xmlns="" class="hl-keyword">container</strong> post-actions {
            tailf:display-groups <strong xmlns="" class="hl-string"><em style="color:red">"summary"</em></strong>;

            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Post-actions are called after successful execution of a
</em></strong>               state.  These are optional and there are separate
               action that can be set for the <strong xmlns="" class="hl-string"><em style="color:red">'create'</em></strong> and <strong xmlns="" class="hl-string"><em style="color:red">'delete'</em></strong>
               <strong xmlns="" class="hl-keyword">case</strong> respectively.

               These actions are put as requests in the
               side-effect-queue and are executed asynchronously with
               respect to the original service transaction.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
            <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Asynchronous side-effects after successful execution"</em></strong>;
            <strong xmlns="" class="hl-keyword">leaf</strong> create-action-node {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"This leaf identifies the node on which a specified
</em></strong>                 action resides. This action is called after this state
                 as got a <strong xmlns="" class="hl-string"><em style="color:red">'reached'</em></strong> <strong xmlns="" class="hl-keyword">status</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> create-action-name {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"The name of the action."</em></strong>;
              <strong xmlns="" class="hl-keyword">type</strong> string;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> create-action-result-expr {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"An action responds with a structured result. A certain
</em></strong>                 <strong xmlns="" class="hl-keyword">value</strong> could indicate an error or a successful result, e.g.
                 <strong xmlns="" class="hl-string"><em style="color:red">'result true'</em></strong>.

                 This statement describes an XPath expression to
                 evaluate the result of the action so that the
                 side-effect-queue can indicate action errors.

                 The result of the expression is converted to a boolean using
                 the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the action
                 is reported as successful, otherwise as failed.

                 The context for evaluating this expression is the
                 resulting xml tree of the action.

                 The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
                 with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }
            <strong xmlns="" class="hl-keyword">choice</strong> create-action-operation-mode {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"Specifies if the create post action should be run synchronously
</em></strong>                 or not.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">leaf</strong> create-action-async {
                <strong xmlns="" class="hl-keyword">type</strong> empty;
              }
              <strong xmlns="" class="hl-keyword">leaf</strong> create-action-sync {
                <strong xmlns="" class="hl-keyword">type</strong> empty;
              }
              <strong xmlns="" class="hl-keyword">default</strong> create-action-async;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> delete-action-node {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"This leaf identifies the node on which a specified
</em></strong>                 action resides. This action is called after this state
                 as got a <strong xmlns="" class="hl-string"><em style="color:red">'not-reached'</em></strong> <strong xmlns="" class="hl-keyword">status</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> delete-action-name {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"The name of the action."</em></strong>;
              <strong xmlns="" class="hl-keyword">type</strong> string;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> delete-action-result-expr {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"An action responds with a structured result. A certain
</em></strong>                 <strong xmlns="" class="hl-keyword">value</strong> could indicate an error or a successful result, e.g.
                 <strong xmlns="" class="hl-string"><em style="color:red">'result true'</em></strong>.

                 This statement describes an XPath expression to evaluate the
                 result of the action so that the side-effect-queue can
                 indicate action errors.

                 The result of the expression is converted to a boolean using
                 the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the action
                 is reported as successful, otherwise as failed.

                 The context for evaluating this expression is the
                 resulting xml tree of the action.

                 The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
                 with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }
            <strong xmlns="" class="hl-keyword">choice</strong> delete-action-operation-mode {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"Specifies if the delete post action should be run synchronously
</em></strong>                 or not.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">leaf</strong> delete-action-async {
                <strong xmlns="" class="hl-keyword">type</strong> empty;
              }
              <strong xmlns="" class="hl-keyword">leaf</strong> delete-action-sync {
                <strong xmlns="" class="hl-keyword">type</strong> empty;
              }
              <strong xmlns="" class="hl-keyword">default</strong> delete-action-async;
            }
          }

          <strong xmlns="" class="hl-keyword">leaf</strong> post-action-<strong xmlns="" class="hl-keyword">status</strong> {
            <strong xmlns="" class="hl-keyword">when</strong> <strong xmlns="" class="hl-string"><em style="color:red">'../post-actions'</em></strong>;
            <strong xmlns="" class="hl-keyword">type</strong> plan-state-action-<strong xmlns="" class="hl-keyword">status</strong>-t;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"This leaf is initially set to 'not-reached'.
</em></strong>
               If a post-action was specified, and returned
               successfully, this <strong xmlns="" class="hl-keyword">leaf</strong> will be set to <strong xmlns="" class="hl-string"><em style="color:red">'create-reached'</em></strong>
               if the component is not back-tracking, and
               <strong xmlns="" class="hl-string"><em style="color:red">'delete-reached'</em></strong> if it is back-tracking.

               If the post-action did not return successfully, this
               <strong xmlns="" class="hl-keyword">leaf</strong> is set to <strong xmlns="" class="hl-string"><em style="color:red">'failed'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>          }

          <strong xmlns="" class="hl-keyword">container</strong> modified {
            tailf:display-groups <strong xmlns="" class="hl-string"><em style="color:red">"summary"</em></strong>;
            <strong xmlns="" class="hl-keyword">config</strong> false;
            tailf:callpoint ncs {
              tailf:internal;
            }
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Devices and other services this service has modified directly or
</em></strong>              indirectly (through another service).<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            tailf:info
              <strong xmlns="" class="hl-string"><em style="color:red">"Devices and other services this service modified directly or
</em></strong>               indirectly.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> devices {
              tailf:info
                <strong xmlns="" class="hl-string"><em style="color:red">"Devices this service modified directly or indirectly"</em></strong>;
              <strong xmlns="" class="hl-keyword">type</strong> leafref {
                <strong xmlns="" class="hl-keyword">path</strong> <strong xmlns="" class="hl-string"><em style="color:red">"/ncs:devices/ncs:device/ncs:name"</em></strong>;
              }
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> services {
              tailf:info
                <strong xmlns="" class="hl-string"><em style="color:red">"Services this service modified directly or indirectly"</em></strong>;
              <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
                require-instance false;
              }
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> lsa-services {
              tailf:info
                <strong xmlns="" class="hl-string"><em style="color:red">"Services residing on remote LSA nodes this service
</em></strong>                has modified directly or indirectly.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
              require-instance false;
              }
            }
          }

          <strong xmlns="" class="hl-keyword">container</strong> directly-modified {
            tailf:display-groups <strong xmlns="" class="hl-string"><em style="color:red">"summary"</em></strong>;
            <strong xmlns="" class="hl-keyword">config</strong> false;
            tailf:callpoint ncs {
              tailf:internal;
            }
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Devices and other services this service has explicitly
</em></strong>              modified.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            tailf:info
              <strong xmlns="" class="hl-string"><em style="color:red">"Devices and other services this service has explicitly
</em></strong>              modified.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> devices {
              tailf:info
                <strong xmlns="" class="hl-string"><em style="color:red">"Devices this service has explicitly modified."</em></strong>;
              <strong xmlns="" class="hl-keyword">type</strong> leafref {
                <strong xmlns="" class="hl-keyword">path</strong> <strong xmlns="" class="hl-string"><em style="color:red">"/ncs:devices/ncs:device/ncs:name"</em></strong>;
              }
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> services {
              tailf:info
                <strong xmlns="" class="hl-string"><em style="color:red">"Services this service has explicitly modified."</em></strong>;
              <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
                require-instance false;
              }
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> lsa-services {
              tailf:info
                <strong xmlns="" class="hl-string"><em style="color:red">"Services residing on remote LSA nodes this service
</em></strong>                has explicitly modified.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
                require-instance false;
              }
            }
          }

          <strong xmlns="" class="hl-keyword">uses</strong> service-get-modifications;

          <strong xmlns="" class="hl-keyword">container</strong> private {
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"NCS service related internal data stored here."</em></strong>;
            tailf:hidden fastmap-private;
            ncs:ncs-service-private;
            <strong xmlns="" class="hl-keyword">leaf</strong> diff-set {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"Internal node use by NCS service manager to remember
</em></strong>                 the reverse diff for a service instance. This is the
                 data that is used by FASTMAP<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> binary;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> forward-diff-set {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"Internal node use by NCS service manager to remember
</em></strong>                 the forwards diff for a service instance. This data is
                 is used to produce the proper <strong xmlns="" class="hl-string"><em style="color:red">'get-modifications'</em></strong> <strong xmlns="" class="hl-keyword">output</strong><strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> binary;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> device-<strong xmlns="" class="hl-keyword">list</strong> {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"A list of managed devices this state has manipulated."</em></strong>;
              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> string;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> ned-id-<strong xmlns="" class="hl-keyword">list</strong> {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"A list of NED identities this service instance has
</em></strong>                 manipulated.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> string;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> service-<strong xmlns="" class="hl-keyword">list</strong> {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"A list of services this state has manipulated."</em></strong>;
              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
                require-instance false;
              }
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> lsa-service-<strong xmlns="" class="hl-keyword">list</strong> {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"A list of LSA services this service instance has manipulated."</em></strong>;
              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
                require-instance false;
              }
            }
          }
        }
      }
      <strong xmlns="" class="hl-keyword">container</strong> private {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"NCS service related internal data stored here."</em></strong>;
        tailf:hidden fastmap-private;

        <strong xmlns="" class="hl-keyword">container</strong> property-<strong xmlns="" class="hl-keyword">list</strong> {
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"FASTMAP service component instance data used by the
</em></strong>             service implementation.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>          <strong xmlns="" class="hl-keyword">list</strong> property {
            <strong xmlns="" class="hl-keyword">key</strong> name;
            <strong xmlns="" class="hl-keyword">leaf</strong> name {
              <strong xmlns="" class="hl-keyword">type</strong> string;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">value</strong> {
              <strong xmlns="" class="hl-keyword">type</strong> string;
            }
          }
        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> back-track {
        <strong xmlns="" class="hl-keyword">type</strong> boolean;
        <strong xmlns="" class="hl-keyword">default</strong> false;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> back-track-goal {
        tailf:alt-name goal;
        <strong xmlns="" class="hl-keyword">type</strong> plan-state-name-t;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> version {
        tailf:hidden full;
        <strong xmlns="" class="hl-keyword">type</strong> uint32;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> nano-plan-history {
    <strong xmlns="" class="hl-keyword">container</strong> plan-history {
      <strong xmlns="" class="hl-keyword">config</strong> false;
      tailf:cdb-oper {
        tailf:persistent true;
      }
      <strong xmlns="" class="hl-keyword">list</strong> plan {
        <strong xmlns="" class="hl-keyword">key</strong> time;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Every time the plan changes its structure, i.e., a
</em></strong>           plan component is added or deleted, or a state is added or
           deleted in a plan component, a copy of the old plan is stored
           in the plan history <strong xmlns="" class="hl-keyword">list</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
        <strong xmlns="" class="hl-keyword">leaf</strong> time {
          <strong xmlns="" class="hl-keyword">type</strong> yang:date-and-time;
          tailf:cli-<strong xmlns="" class="hl-keyword">value</strong>-display-template <strong xmlns="" class="hl-string"><em style="color:red">"$(.|datetime)"</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">uses</strong> nano-plan-components;
      }
    }
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Internal structures
   */</em>

  <strong xmlns="" class="hl-keyword">container</strong> side-effect-queue {
    <strong xmlns="" class="hl-keyword">list</strong> side-effect {
      <strong xmlns="" class="hl-keyword">config</strong> false;
        tailf:cdb-oper {
        tailf:persistent true;
      }

      <strong xmlns="" class="hl-keyword">key</strong> id;
      <strong xmlns="" class="hl-keyword">leaf</strong> id {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Unique identification of the side-effect action"</em></strong>;
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> created {
        <strong xmlns="" class="hl-keyword">type</strong> yang:date-and-time;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> invoked {
        <strong xmlns="" class="hl-keyword">type</strong> yang:date-and-time;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> service {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The service that added the side effect."</em></strong>;
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> requestor {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Path to the requester of side-effect.
</em></strong>           Typically a plan state for a service.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> requestor-op {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The base operation for the request-or when issuing the side-effect."</em></strong>;
        <strong xmlns="" class="hl-keyword">type</strong> enumeration {
          <strong xmlns="" class="hl-keyword">enum</strong> create {
            tailf:code-name op_create;
          }
          <strong xmlns="" class="hl-keyword">enum</strong> delete {
            tailf:code-name op_delete;
          }
        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> action-node {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"This leaf identifies the node on which a specified
</em></strong>           action resides.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> action-name {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The name of the action."</em></strong>;
        <strong xmlns="" class="hl-keyword">type</strong> yang:yang-identifier;
      }
      <strong xmlns="" class="hl-keyword">list</strong> variable {
        <strong xmlns="" class="hl-keyword">key</strong> name;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"A list of variable bindings that will be part of the
</em></strong>           context <strong xmlns="" class="hl-keyword">when</strong> the action-node <strong xmlns="" class="hl-keyword">path</strong> expression is evaluated.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">leaf</strong> name {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The name of the variable"</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">value</strong> {
          <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
          <strong xmlns="" class="hl-keyword">mandatory</strong> true;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"An XPath expression that will be the value of the variable
</em></strong>             <strong xmlns="" class="hl-string"><em style="color:red">'name'</em></strong>. Note that both expressions and <strong xmlns="" class="hl-keyword">path</strong> expressions are
             allowed, which implies that literals <strong xmlns="" class="hl-keyword">must</strong> be quoted.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> result-expr {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"An action responds with a structured result. A certain
</em></strong>           <strong xmlns="" class="hl-keyword">value</strong> could indicate an error or a successful result, e.g.
           <strong xmlns="" class="hl-string"><em style="color:red">'result true'</em></strong>.

           This statement describes an XPath expression to evaluate the
           result of the action so that the side-effect-queue can
           indicate action errors.

           The result of the expression is converted to a boolean using
           the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the action
           is reported as successful, otherwise as failed.

           The context for evaluating this expression is the
           resulting xml tree of the action.

           There are no variable bindings in this evaluation.
           The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
           with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">status</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Resulting status to be set as the request's post-action-status."</em></strong>;
        <strong xmlns="" class="hl-keyword">type</strong> side-effect-q-<strong xmlns="" class="hl-keyword">status</strong>-t;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> error-message {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"An additional error message for the action if this is applicable.
</em></strong>           I.e. an error is thrown.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> u-info {
        tailf:hidden full;
        <strong xmlns="" class="hl-keyword">type</strong> binary;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> sync {
        <strong xmlns="" class="hl-keyword">type</strong> boolean;
      }
    }

    <strong xmlns="" class="hl-keyword">container</strong> settings {
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Settings related to the side effect queue."</em></strong>;
      <strong xmlns="" class="hl-keyword">container</strong> automatic-purge {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Settings for the automatic purging of side effects."</em></strong>;
        <strong xmlns="" class="hl-keyword">container</strong> failed-queue-time {
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The time failed side effects should be kept in the queue."</em></strong>;
          <strong xmlns="" class="hl-keyword">choice</strong> failed-queue-time-<strong xmlns="" class="hl-keyword">choice</strong> {
            <strong xmlns="" class="hl-keyword">leaf</strong> forever {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"Failed side effects should be kept forever."</em></strong>;
              <strong xmlns="" class="hl-keyword">type</strong> empty;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> seconds {
              <strong xmlns="" class="hl-keyword">type</strong> uint16;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> minutes {
              <strong xmlns="" class="hl-keyword">type</strong> uint16;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> hours {
              <strong xmlns="" class="hl-keyword">type</strong> uint16;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> days {
              <strong xmlns="" class="hl-keyword">type</strong> uint16;
              <strong xmlns="" class="hl-keyword">default</strong> <span xmlns="" class="hl-number">7</span>;
            }
            <strong xmlns="" class="hl-keyword">default</strong> days;
          }
        }
      }
    }

    tailf:action invoke {
      tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"Invoke queued side-effects asynchronously"</em></strong>;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Invokes all not already executing/executed side-effects in the
</em></strong>         side effect queue.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      tailf:actionpoint ncsinternal {
        tailf:internal;
      }
      <strong xmlns="" class="hl-keyword">input</strong> {
      }
      <strong xmlns="" class="hl-keyword">output</strong> {
        <strong xmlns="" class="hl-keyword">leaf</strong> num-invoked {
          <strong xmlns="" class="hl-keyword">type</strong> uint32;
        }
      }
    }

    tailf:action purge {
      tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"Purge all failed side effects"</em></strong>;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Purge all failed side effects."</em></strong>;
      tailf:actionpoint ncsinternal {
        tailf:internal;
      }
      <strong xmlns="" class="hl-keyword">input</strong> {
      }
      <strong xmlns="" class="hl-keyword">output</strong> {
        <strong xmlns="" class="hl-keyword">leaf</strong> purged-side-effects {
          <strong xmlns="" class="hl-keyword">type</strong> uint16;
        }
      }
    }
  }

  <strong xmlns="" class="hl-keyword">container</strong> zombies {
    <strong xmlns="" class="hl-keyword">config</strong> false;
    tailf:cdb-oper {
      tailf:persistent true;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Container for deleted Nano Services that still perform staged deletes."</em></strong>;

    <strong xmlns="" class="hl-keyword">list</strong> service {
      <strong xmlns="" class="hl-keyword">key</strong> service-<strong xmlns="" class="hl-keyword">path</strong>;
      <strong xmlns="" class="hl-keyword">leaf</strong> service-<strong xmlns="" class="hl-keyword">path</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The path to where the service resided that has been deleted
</em></strong>           and become a zombie.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> delete-<strong xmlns="" class="hl-keyword">path</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The path to the node nearest to the top that was deleted and resulted
</em></strong>           in this service becoming a zombie.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> pending-delete {
        <strong xmlns="" class="hl-keyword">type</strong> empty;
      }

      <strong xmlns="" class="hl-keyword">leaf</strong> diffset {
        tailf:hidden full;
        <strong xmlns="" class="hl-keyword">type</strong> binary;
      }

      <strong xmlns="" class="hl-keyword">leaf</strong> latest-commit-params {
        tailf:hidden full;
        <strong xmlns="" class="hl-keyword">type</strong> binary;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Latest transactions commit parameters are stored there, these are
</em></strong>           used in reactive-re-deploy actions that <strong xmlns="" class="hl-keyword">must</strong> have the same
           parameters as the original service commit.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      }
      <strong xmlns="" class="hl-keyword">leaf</strong> latest-u-info {
        tailf:hidden full;
        <strong xmlns="" class="hl-keyword">type</strong> binary;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Latest transactions user info is stored there, these are
</em></strong>           used in reactive-re-deploy actions that <strong xmlns="" class="hl-keyword">must</strong> be performed by
           a user with the same user info.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      }

      <strong xmlns="" class="hl-keyword">container</strong> private {
        <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> device-<strong xmlns="" class="hl-keyword">list</strong> {
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"A list of managed devices this state has manipulated."</em></strong>;
          tailf:hidden full;
          <strong xmlns="" class="hl-keyword">type</strong> string;
        }
      }

      <strong xmlns="" class="hl-keyword">container</strong> plan {
        <strong xmlns="" class="hl-keyword">uses</strong> nano-plan-components {
          <strong xmlns="" class="hl-keyword">augment</strong> <strong xmlns="" class="hl-string"><em style="color:red">"component"</em></strong> {
            <strong xmlns="" class="hl-keyword">uses</strong> force-back-track-action;
          }
        }
        <strong xmlns="" class="hl-keyword">container</strong> commit-queue {
          <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"The service is being committed through the commit queue."</em></strong>;
          <strong xmlns="" class="hl-keyword">list</strong> queue-item {
            <strong xmlns="" class="hl-keyword">key</strong> id;
            <strong xmlns="" class="hl-keyword">leaf</strong> id {
              <strong xmlns="" class="hl-keyword">type</strong> uint64;
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"If the queue item in the commit queue refers to this service
</em></strong>                 this is the queue number.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            }
          }
        }

        <strong xmlns="" class="hl-keyword">leaf</strong> failed {
          tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"failedx"</em></strong>;
          <strong xmlns="" class="hl-keyword">type</strong> empty;
        }
        <strong xmlns="" class="hl-keyword">container</strong> error-info {
          <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Additional info if plan has failed"</em></strong>;
          <strong xmlns="" class="hl-keyword">leaf</strong> message {
            <strong xmlns="" class="hl-keyword">type</strong> string;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"An explanatory message for the failing plan."</em></strong>;
          }
          <strong xmlns="" class="hl-keyword">leaf</strong> log-entry {
            <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
              require-instance false;
            }
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Reference to a service log entry with additional information."</em></strong>;
          }
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> deleting {
          tailf:hidden fastmap-private;
          <strong xmlns="" class="hl-keyword">type</strong> empty;
        }
      }

      tailf:action re-deploy {
        tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"revive the zombie and re-deploy it."</em></strong>;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The nano service became a zombie since it was deleted but not
</em></strong>           all delete pre-conditions was fulfilled. This action revives the
           zombie service and re-deploys and stores it back as a zombie if
           necessary. This will be performed with the user who requested the
           action.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        tailf:actionpoint ncsinternal {
          tailf:internal;
        }
        <strong xmlns="" class="hl-keyword">input</strong> {
          <strong xmlns="" class="hl-keyword">uses</strong> ncs-commit-params;
        }
        <strong xmlns="" class="hl-keyword">output</strong> {
          <strong xmlns="" class="hl-keyword">uses</strong> ncs-commit-result;
        }
      }
      tailf:action reactive-re-deploy {
        tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"revive the zombie and reactive re-deploy it."</em></strong>;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The nano service became a zombie since it was deleted but not
</em></strong>           all delete pre-conditions was fulfilled. This action revives the
           zombie service and re-deploys and stores it back as a zombie if
           necessary. This will be performed with the same user as the original
           commit.

           By <strong xmlns="" class="hl-keyword">default</strong> this action is asynchronous and returns nothing.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
        tailf:actionpoint ncsinternal {
          tailf:internal;
        }
        <strong xmlns="" class="hl-keyword">input</strong> {
          <strong xmlns="" class="hl-keyword">leaf</strong> sync {
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"By default the action is asynchronous, i.e. it does not wait for
</em></strong>               the service to be re-deployed. Use this <strong xmlns="" class="hl-keyword">leaf</strong> to get synchronous
               behaviour and block until the service re-deploy transaction is
               committed. It also means that the action will possibly return
               a commit result, such as commit queue id if any, or an
               error if the transaction failed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            <strong xmlns="" class="hl-keyword">type</strong> empty;
          }
        }
        <strong xmlns="" class="hl-keyword">output</strong> {
          <strong xmlns="" class="hl-keyword">uses</strong> ncs-commit-result;
        }
      }
      tailf:action resurrect {
        tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"Load the zombie back as service in current state."</em></strong>;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The zombie resurrection is used to stop the progress of a staged
</em></strong>           nano service delete and restore current state as is.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        tailf:actionpoint ncsinternal {
          tailf:internal;
        }
        <strong xmlns="" class="hl-keyword">input</strong> {
          <strong xmlns="" class="hl-keyword">container</strong> dry-run {
            <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">""</em></strong>;
            <strong xmlns="" class="hl-keyword">leaf</strong> outformat {
              <strong xmlns="" class="hl-keyword">type</strong> outformat3;
            }
          }
        }
        <strong xmlns="" class="hl-keyword">output</strong> {
          <strong xmlns="" class="hl-keyword">leaf</strong> result {
            <strong xmlns="" class="hl-keyword">type</strong> string;
          }
          <strong xmlns="" class="hl-keyword">choice</strong> outformat {
            <strong xmlns="" class="hl-keyword">case</strong> <strong xmlns="" class="hl-keyword">case</strong>-xml {
              <strong xmlns="" class="hl-keyword">uses</strong> dry-run-xml;
            }
            <strong xmlns="" class="hl-keyword">case</strong> <strong xmlns="" class="hl-keyword">case</strong>-cli {
              <strong xmlns="" class="hl-keyword">uses</strong> dry-run-cli;
            }
            <strong xmlns="" class="hl-keyword">case</strong> <strong xmlns="" class="hl-keyword">case</strong>-native {
              <strong xmlns="" class="hl-keyword">uses</strong> dry-run-native;
            }
          }
        }
      }
      <strong xmlns="" class="hl-keyword">uses</strong> log-data;

      <strong xmlns="" class="hl-keyword">uses</strong> service-commit-queue {
        <strong xmlns="" class="hl-keyword">status</strong> obsolete;
        <strong xmlns="" class="hl-keyword">augment</strong> <strong xmlns="" class="hl-string"><em style="color:red">"commit-queue/queue-item/failed-device"</em></strong> {
          tailf:action load-device-<strong xmlns="" class="hl-keyword">config</strong> {
            tailf:display-<strong xmlns="" class="hl-keyword">when</strong> <strong xmlns="" class="hl-string"><em style="color:red">"../config-data != ''"</em></strong>;
            tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"Load device configuration into an open transaction."</em></strong>;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Load device configuration into an open transaction."</em></strong>;
            tailf:actionpoint ncsinternal {
              tailf:internal;
            }
            <strong xmlns="" class="hl-keyword">input</strong> {
            }
            <strong xmlns="" class="hl-keyword">output</strong> {
              <strong xmlns="" class="hl-keyword">leaf</strong> result {
                <strong xmlns="" class="hl-keyword">type</strong> string;
              }
            }
          }
        }
      }
    }
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Plan Extension Statements
   */</em>

  <strong xmlns="" class="hl-keyword">extension</strong> plan-outline {
    <strong xmlns="" class="hl-keyword">argument</strong> id {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier;
      }
    }
    tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    tailf:use-in <strong xmlns="" class="hl-string"><em style="color:red">"module"</em></strong>;
    tailf:use-in <strong xmlns="" class="hl-string"><em style="color:red">"submodule"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:self-as-service-status"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:component-type"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"+"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement is optionally used in a node that defines a
</em></strong>       service to document its plan.  It is required for a nano
       service.

       A plan is outlined by listing all component-types that the
       service can instantiate, and their related states.  Note that
       a specific service instance may instantiate zero, one, or more
       components of a certain <strong xmlns="" class="hl-keyword">type</strong>.

       It is required that a plan has one component of <strong xmlns="" class="hl-keyword">type</strong> ncs:self.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> self-as-service-<strong xmlns="" class="hl-keyword">status</strong> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"If this statement has been set on a plan outline the self components
</em></strong>       init and ready states <strong xmlns="" class="hl-keyword">status</strong> will reflect the overall <strong xmlns="" class="hl-keyword">status</strong> of the
       service.

       The self components ready state will not be set to reached until all
       other components ready states have been set to reached and all post
       actions have been run successfully. Likewise <strong xmlns="" class="hl-keyword">when</strong> deleting a service
       the init state will not be set to not-reached (and the service deleted)
       until all other components init states have had their <strong xmlns="" class="hl-keyword">status</strong>
       set to not-reached and any post actions have been run successfully.

       If any state in a component, other than the self component, or post
       action have failed the ready/init state of the self component will
       also be set to failed to reflect that the service has failed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> component-<strong xmlns="" class="hl-keyword">type</strong> {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier-ref;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:state"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement identifies the component type, which is a
</em></strong>       <strong xmlns="" class="hl-keyword">reference</strong> to a YANG <strong xmlns="" class="hl-keyword">identity</strong>.

       A component-<strong xmlns="" class="hl-keyword">type</strong> contains an ordered <strong xmlns="" class="hl-keyword">list</strong> of states which in
       also are references to YANG identities.  It is required that the
       first state in a component-<strong xmlns="" class="hl-keyword">type</strong> is ncs:init and the last state
       is ncs:ready.

       Each state represents a unit of work performed by the
       service <strong xmlns="" class="hl-keyword">when</strong> a certain pre condition is satisfied.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> state {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier-ref;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:create"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:delete"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement identifies the state, which is a reference to a
</em></strong>       YANG <strong xmlns="" class="hl-keyword">identity</strong>.

       It represents a unit of work performed by the service <strong xmlns="" class="hl-keyword">when</strong> a
       certain pre condition is satisfied.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> create {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:nano-callback"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:pre-condition"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:post-action-node"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:force-commit"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement defines nano service state characteristics for
</em></strong>       entering this state.

       The component will advance to this state <strong xmlns="" class="hl-keyword">when</strong> it is not back
       tracking, it has reached its previous state, and the
       <strong xmlns="" class="hl-string"><em style="color:red">'pre-condition'</em></strong> is met.

       If the <strong xmlns="" class="hl-string"><em style="color:red">'nano-callback'</em></strong> statement is defined, it means that
       there is a callback function (or template) that will be invoked
       before this state is entered.

       The <strong xmlns="" class="hl-string"><em style="color:red">'post-action-node'</em></strong> optionally defines an action to be
       invoked <strong xmlns="" class="hl-keyword">when</strong> this state has been entered.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> delete {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:nano-callback"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:pre-condition"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:post-action-node"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:force-commit"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement defines nano service state characteristics for
</em></strong>       leaving this state.

       The component will advance to this state <strong xmlns="" class="hl-keyword">when</strong> it is back
       tracking, it has reached its following state, and the
       <strong xmlns="" class="hl-string"><em style="color:red">'pre-condition'</em></strong> is met.

       If the <strong xmlns="" class="hl-string"><em style="color:red">'nano-callback'</em></strong> statement is defined, it means that
       there is a callback function (or template) that will be invoked
       before this state is left.

       The <strong xmlns="" class="hl-string"><em style="color:red">'post-action-node'</em></strong> optionally defines an action to be
       invoked <strong xmlns="" class="hl-keyword">when</strong> this state has been left.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> nano-callback {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement indicates that a callback function (or a
</em></strong>       template) is defined for this state and operation.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> post-action-node {
    <strong xmlns="" class="hl-keyword">argument</strong> xpath {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> plan-xpath;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:action-name"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:result-expr"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:sync"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement defined a action side-effect to be executed
</em></strong>       after the state has been successfully been executed.

       This statement <strong xmlns="" class="hl-keyword">argument</strong> is the node where the action resides.

       This action is executed asynchronously with respect to initial
       service transaction. The result is manifested as a <strong xmlns="" class="hl-keyword">value</strong> in
       the requesting plan states post-action-<strong xmlns="" class="hl-keyword">status</strong> <strong xmlns="" class="hl-keyword">leaf</strong>.

       The XPath expression is evaluated in the context described for
       <strong xmlns="" class="hl-string"><em style="color:red">'plan-xpath'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> action-name {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"The name of the action."</em></strong>;
  }

  <strong xmlns="" class="hl-keyword">extension</strong> result-expr {
    <strong xmlns="" class="hl-keyword">argument</strong> xpath {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"An action responds with a structured result.  A certain value
</em></strong>       can indicate an error or a successful result, e.g.,
       <strong xmlns="" class="hl-string"><em style="color:red">'result true'</em></strong>.

       The result of the expression is converted to a boolean using
       the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the action
       is reported as successful, otherwise as failed.

       The context for evaluating this expression is the
       resulting xml tree of the action.

       There are no variable bindings in this evaluation.
       The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
       with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> sync {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Run the action synchronosly so that later states cannot proceed before
</em></strong>       the post action has finished running successfully.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> force-commit {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Force a commit before any later states can proceed."</em></strong>;
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Behavior tree extensions for nano services
   */</em>

  <strong xmlns="" class="hl-keyword">extension</strong> service-behavior-tree {
    <strong xmlns="" class="hl-keyword">argument</strong> servicepoint {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier;
      }
    }
    tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    tailf:use-in <strong xmlns="" class="hl-string"><em style="color:red">"module"</em></strong>;
    tailf:use-in <strong xmlns="" class="hl-string"><em style="color:red">"submodule"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:plan-outline-ref"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:plan-location"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:selector"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:multiplier"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:converge-on-re-deploy"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement is used to define the behavior tree for a nano
</em></strong>       service.

       The <strong xmlns="" class="hl-keyword">argument</strong> to this statement is the name of the service point
       for the nano service.

       The behavior tree consists of control flow nodes and execution
       nodes.

       There are two types of control flow nodes, defined with the
       <strong xmlns="" class="hl-string"><em style="color:red">'ncs:selector'</em></strong> and <strong xmlns="" class="hl-string"><em style="color:red">'ncs:multiplier'</em></strong> statements.

       There is one <strong xmlns="" class="hl-keyword">type</strong> of execution nodes, defined with the
       <strong xmlns="" class="hl-string"><em style="color:red">'ncs:create-component'</em></strong> statement.

       A behavior tree is evaluated by evaluating all top control flow
       nodes, in order.  When a control flow node is evaluated, it
       checks if it should evaluate its children.  How this is done
       depend on the <strong xmlns="" class="hl-keyword">type</strong> of control flow node.  When an execution
       node is reached, the resulting component-<strong xmlns="" class="hl-keyword">type</strong> is added as a
       component to the plan and given a component-name.

       This process of dynamically instantiating a plan with its
       components by evaluation of the behavior tree is called
       synthesizing the plan.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> plan-outline-ref {
    <strong xmlns="" class="hl-keyword">argument</strong> id {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier-ref;
      }
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"The name of the plan outline that the behavior tree will use
</em></strong>       to synthesize a service instance<strong xmlns="" class="hl-string"><em style="color:red">'s plan.";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> plan-location {
    <strong xmlns="" class="hl-keyword">argument</strong> <strong xmlns="" class="hl-keyword">path</strong> {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
      }
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"XPath starting with absolute or relative path to a list or container
</em></strong>       where the plan is stored. Use this only if the plan is stored outside
       the service.

       The XPath expression is evaluated using the nano service as the context
       node, and the expression <strong xmlns="" class="hl-keyword">must</strong> return a node set.

       If the target lies within lists, all keys <strong xmlns="" class="hl-keyword">must</strong> be specified. A <strong xmlns="" class="hl-keyword">key</strong>
       either has a <strong xmlns="" class="hl-keyword">value</strong>, or a <strong xmlns="" class="hl-keyword">reference</strong> to a <strong xmlns="" class="hl-keyword">key</strong> of the service using the
       function current() as starting point for an XPath location <strong xmlns="" class="hl-keyword">path</strong>.
       For example:

         /a/b[k1=<strong xmlns="" class="hl-string"><em style="color:red">'paul'</em></strong>][k2=current()/k]/c<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <em xmlns="" class="hl-comment" style="color: silver">/* Control flow nodes */</em>

  <strong xmlns="" class="hl-keyword">extension</strong> selector {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:pre-condition"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:observe"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:variable"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:selector"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:multiplier"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:create-component"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This control flow node synthesizes its children
</em></strong>       that have their pre-conditions met.

       All <strong xmlns="" class="hl-string"><em style="color:red">'ncs:variable'</em></strong> statements in this statement will have their
       XPath context node set to each node in the resulting node set.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> multiplier {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:pre-condition"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:observe"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:foreach"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This control flow node synthesizes zero or more copies of
</em></strong>       its children.

       When this node is evaluated, it evaluates the <strong xmlns="" class="hl-string"><em style="color:red">'foreach'</em></strong>
       expression.  For each node in the resulting node set, it
       synthesizes all children that have their pre-conditions
       met.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> foreach {
    <strong xmlns="" class="hl-keyword">argument</strong> xpath {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> plan-xpath;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:when"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:variable"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:selector"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:multiplier"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:create-component"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement's argument is an XPath expression for the node set
</em></strong>       that is the basis for a multiplier selection.  For each node in
       the resulting node set the children will be evaluated.

       The XPath expression is evaluated in the context described for
       <strong xmlns="" class="hl-string"><em style="color:red">'plan-xpath'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> <strong xmlns="" class="hl-keyword">when</strong> {
    <strong xmlns="" class="hl-keyword">argument</strong> xpath {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> plan-xpath;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This optional statement describes an XPath expression that is
</em></strong>       used to further filter the selection of nodes from the
       node set in a multiplier component or the variables that should
       be created for a component.

       The result of the expression is converted to a boolean using
       the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the node is
       added to the node set or the variable is added to the variable
       <strong xmlns="" class="hl-keyword">list</strong>.

       The XPath expression is evaluated in the context described for
       <strong xmlns="" class="hl-string"><em style="color:red">'plan-xpath'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <em xmlns="" class="hl-comment" style="color: silver">/* Execution nodes */</em>

  <strong xmlns="" class="hl-keyword">extension</strong> create-component {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> plan-xpath;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:component-type-ref"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:pre-condition"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:observe"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:deprecates-component"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"When this execution node is evaluated, it instantiates a component
</em></strong>       in the service<strong xmlns="" class="hl-string"><em style="color:red">'s plan.
</em></strong>
       The name of the component is the result of evaluating the XPath
       expression and convert the result to a string.

       The XPath expression is evaluated in the context described for
       <strong xmlns="" class="hl-string"><em style="color:red">'plan-xpath'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> component-<strong xmlns="" class="hl-keyword">type</strong>-ref {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier-ref;
      }
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement identifies the component type for the component.
</em></strong>       It <strong xmlns="" class="hl-keyword">must</strong> refer to a component-<strong xmlns="" class="hl-keyword">type</strong> defined in the plan-outline
       for the service.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <em xmlns="" class="hl-comment" style="color: silver">/* Common substatements */</em>

  <strong xmlns="" class="hl-keyword">extension</strong> pre-condition {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:monitor"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:all"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:any"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement defines a pre-condition that must hold for
</em></strong>       further evaluation/execution to proceed.

       If the pre-condition is not satisfied a kicker will be created
       with the same monitor to observe the changes and then
       re-deploy the service.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> observe {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:monitor"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"If a control flow node has been successfully evaluated, this
</em></strong>       statement<strong xmlns="" class="hl-string"><em style="color:red">'s '</em></strong>monitor<strong xmlns="" class="hl-string"><em style="color:red">' will be installed as a kicker, which will
</em></strong>       re-deploy the service if the monitor<strong xmlns="" class="hl-string"><em style="color:red">'s trigger conditions are met.";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> monitor {
    <strong xmlns="" class="hl-keyword">argument</strong> node {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> plan-xpath;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:trigger-on-delete"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:trigger-expr"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"If a node that matches the value of this statement and the
</em></strong>       <strong xmlns="" class="hl-string"><em style="color:red">'trigger'</em></strong> expression evaluates to true, this condition is
       satisfied. If the child statement <strong xmlns="" class="hl-string"><em style="color:red">'trigger-on-delete'</em></strong> is used
       this condition will be satisfied <strong xmlns="" class="hl-keyword">when</strong> no nodes matches the
       <strong xmlns="" class="hl-keyword">value</strong> of this statement. Note that only one of <strong xmlns="" class="hl-string"><em style="color:red">'trigger'</em></strong> and
       <strong xmlns="" class="hl-string"><em style="color:red">'trigger-on-delete'</em></strong> can be used as child statements to this
       statement.

       The <strong xmlns="" class="hl-keyword">argument</strong> to this statement is like an instance-identifier,
       but a <strong xmlns="" class="hl-keyword">list</strong> may be specified without any keys.  This is treated
       like a wildcard that matches all entries in the <strong xmlns="" class="hl-keyword">list</strong>.

       The XPath expression is evaluated in the context described for
       <strong xmlns="" class="hl-string"><em style="color:red">'plan-xpath'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> trigger-on-delete {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Specify if the monitored node should be checked if it has been deleted."</em></strong>;
  }

  <strong xmlns="" class="hl-keyword">extension</strong> trigger-expr {
    <strong xmlns="" class="hl-keyword">argument</strong> xpath {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> plan-xpath;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This optional statement is used to further filter nodes
</em></strong>       in a given nodeset.

       The result of the expression is converted to a boolean using
       the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the condition
       is satisfied, otherwise it is not satisfied.

       The XPath expression is evaluated in the context described for
       <strong xmlns="" class="hl-string"><em style="color:red">'plan-xpath'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }


  <strong xmlns="" class="hl-keyword">extension</strong> variable {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }

    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:when"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:value-expr"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement defines an XPath variable with a name and a
</em></strong>       <strong xmlns="" class="hl-keyword">value</strong>.  The <strong xmlns="" class="hl-keyword">value</strong> is evaluated as an XPath expression.

       A variable called FOO can thus be retrieved as <strong xmlns="" class="hl-string"><em style="color:red">'{$FOO}'</em></strong>.

       These variables can for example be used in a <strong xmlns="" class="hl-string"><em style="color:red">'multiplier'</em></strong>
       control flow node to create <strong xmlns="" class="hl-keyword">unique</strong> names of duplicated
       components.  The child components can be given names like
       <strong xmlns="" class="hl-string"><em style="color:red">'comp_{$FOO}'</em></strong>, and <strong xmlns="" class="hl-keyword">when</strong> that expression is evaluated,
       the resulting component will have a name with {$FOO}
       substituted with the <strong xmlns="" class="hl-keyword">value</strong> of the variable <strong xmlns="" class="hl-string"><em style="color:red">'FOO'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> <strong xmlns="" class="hl-keyword">value</strong>-expr {
    <strong xmlns="" class="hl-keyword">argument</strong> xpath {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> plan-xpath;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement defines an XPath expression that when evaluated
</em></strong>       constitutes a <strong xmlns="" class="hl-keyword">value</strong> for a variable.

       The XPath expression is evaluated in the context described for
       <strong xmlns="" class="hl-string"><em style="color:red">'plan-xpath'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> deprecates-component {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> plan-xpath;
      }
    }

    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:component-type-ref"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Indicate that the component deprecates another deleted component and
</em></strong>       that it will produce the same configuration as the old component. Before
       running this component the reverse diffsets for all the old components
       states will be applied and the component will be deleted.

       If the old component is still present after synthesizing the behaviour
       tree this statement will be ignored. <strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> any {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:monitor"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This extension is used inside of pre-condition extensions
</em></strong>       to allow multiple monitors inside of a single pre-condition.
       A pre-condition using this <strong xmlns="" class="hl-keyword">extension</strong> is satisfied if at least
       one of the monitors given as <strong xmlns="" class="hl-keyword">argument</strong> evaluates to true.

       This <strong xmlns="" class="hl-keyword">extension</strong> <strong xmlns="" class="hl-keyword">uses</strong> short-circuit evaluation, i.e., if one of the
       monitors given as <strong xmlns="" class="hl-keyword">argument</strong> evaluates to true the evaluation
       will stop.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> all {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:monitor"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This extension is used inside of pre-condition extensions
</em></strong>       to allow multiple monitors inside of a single pre-condition.
       A pre-condition using this <strong xmlns="" class="hl-keyword">extension</strong> is satisfied if all
       of the monitors given as <strong xmlns="" class="hl-keyword">argument</strong> evaluates to true.

       This <strong xmlns="" class="hl-keyword">extension</strong> <strong xmlns="" class="hl-keyword">uses</strong> short-circuit evaluation, i.e., if one of
       the monitors given as <strong xmlns="" class="hl-keyword">argument</strong> evaluates to false the evaluation
       will stop.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> converge-on-re-deploy {
    <strong xmlns="" class="hl-keyword">status</strong> deprecated;
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Do not converge a service in the transaction in which it is created.
</em></strong>       On service creation the service will only synthesize the plan and
       schedule a reactive-re-deploy of itself.

       By <strong xmlns="" class="hl-keyword">default</strong> a service starts converging in the transaction in which
       it is created, but in certain scenarios this might not be the desired
       behaviour. E.g. <strong xmlns="" class="hl-keyword">when</strong> executing a service through the commit queue with
       error recovery set to rollback on error, this will ensure that the
       service intent is still present even <strong xmlns="" class="hl-keyword">when</strong> there are errors in the
       commit queue.

       Note: In a future release this behaviour will be the <strong xmlns="" class="hl-keyword">default</strong> and
             this setting will be removed, hence the deprecated <strong xmlns="" class="hl-keyword">status</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }
}</pre><p>
                     
            </p>
            <p>
                       The <code class="code">ncs:plan-data</code> grouping is defined as
                       operational data that is supposed to be added to the Reactive
                       FASTMAP service yang with a <code class="code">uses ncs:plan-data</code>
                       YANG directive.
                     
            </p>
            <p>
                       A <span class="emphasis"><em>plan</em></span> consists of one or many
                       <span class="emphasis"><em>component</em></span> entries. Each
                       <span class="emphasis"><em>component</em></span> has a name and a type. The type
                       is an identityref and the service must therefore define
                       identities for the types of components it uses. There is one
                       predefined component type named <span class="emphasis"><em>self</em></span> and
                       a service with a plan is expected to have at least the
                       <span class="emphasis"><em>self</em></span> component defined.
                     
            </p>
            <p>
                       Each component consists of two or more
                       <span class="emphasis"><em>state</em></span> entries
                       where the state name is an identityref. The service must
                       define identities for the states it wants to use. There are two
                       predefined states <span class="emphasis"><em>init</em></span> and
                       <span class="emphasis"><em>ready</em></span> and each plan component is expected
                       to have <span class="emphasis"><em>init</em></span> as its first state and
                       <span class="emphasis"><em>ready</em></span> as its last.
                     
            </p>
            <p>
                       A state has a status leaf which can take one of the values
                       <span class="emphasis"><em>not-reached</em></span>, <span class="emphasis"><em>reached</em></span>
                       or <span class="emphasis"><em>failed</em></span>.
                     
            </p>
            <p>
                       The purpose of the <span class="emphasis"><em>self</em></span> component is to
                       show the overall progress of the Reactive FASTMAP service and
                       the <span class="emphasis"><em>self</em></span> component <span class="emphasis"><em>ready</em></span>
                       state should have status <span class="emphasis"><em>reached</em></span> if and
                       only if the service has completed successfully.
                       All other components and states are optional and should be
                       used to show the progress in more detail if necessary.
                     
            </p>
            <p>
                       The plan should be defined and the statuses written inside the
                       service <code class="code">create()</code> method. Hence the same FASTMAP
                       logic applies to the plan as for any other configuration data.
                       This implies that the plan has to be defined
                       completely at <code class="code">create()</code> as if this was the first
                       definition. If a service modification or <code class="code">reactive-re-deploy</code>
                       leave out a state or component, that has been earlier defined, this
                       state or component will be removed.
                     
            </p>
            <p>
                       When the status leaf in a component state changes value
                       NSO will log the time of the status change in the
                       <span class="emphasis"><em>when</em></span> leaf. Furthermore when there is a
                       structural changes of the plan, i.e added/removed components
                       or states, NSO will log this in the
                       <span class="emphasis"><em>plan-history</em></span> list.
                       The Reactive FASTMAP service need not and should not attempt doing
                       this logging inside the create method.
                     
            </p>
            <p>
                       A plan also defines an empty leaf <span class="emphasis"><em>failed</em></span>.
                       NSO will set this leaf when there exists states in the
                       plan with status <span class="emphasis"><em>failed</em></span>.
                       As such this is an aggregation to make it easy to verify if a
                       RFM service is progressing without problems.
                     
            </p>
            <p>
                       In the Java API there exist a utility class to help writing
                       plan data in the service create method. This class is called
                       PlanComponent and has the following methods:
               
                       
            </p><pre class="programlisting">public class PlanComponent {

    /**
    * Creation of a plan component.
    * It uses a NavuNode pointing to the service. This is normally the same
    * NavuNode as supplied as an argument to the service create() method.
    *
    * @param service
    * @param name
    * @param componentType
    * @throws NavuException
    */
    public PlanComponent(NavuNode service,
                         String name,
                         String componentType) throws NavuException;

    /**
     * This method supplies a state to the specific component.
     * The initial status for this state can be ncs:reached or ncs:not-reached
     * and is indicated by setting the reached boolean to true or false
     * respectively
     *
     * @param stateName
     * @param reached
     * @return
     * @throws NavuException
     */
    public PlanComponent append(String stateName) throws NavuException;

    /**
     * Setting status to ncs:not-reached for a specific state in the
     * plan component
     *
     * @param stateName
     * @return
     * @throws NavuException
     */
    public PlanComponent setNotReached(String stateName) throws NavuException;

    /**
     * Setting status to ncs:reached for a specific state in the plan component
     *
     * @param stateName
     * @return
     * @throws NavuException
     */
    public PlanComponent setReached(String stateName) throws NavuException;

    /**
     * Setting status to ncs:failed for a specific state in the plan component
     *
     * @param stateName
     * @return
     * @throws NavuException
     */
    public PlanComponent setFailed(String stateName) throws NavuException;

}</pre><p>
               
                       The constructor for the PlanComponent takes the service
                       NavuNode from the <code class="code">create()</code> method together with
                       the component name and type. The type is either
                       <span class="emphasis"><em>ncs:self</em></span> or any other type defined as
                       an identity in the service YANG module.
                       The PlanComponent instance has an <code class="code">append()</code> method
                       to add new states which is either <span class="emphasis"><em>ncs:init</em></span>,
                       <span class="emphasis"><em>ncs:ready</em></span> or any other state defined as
                       an identity in the service YANG module.
                       The <code class="code">setNotReached()</code>, <code class="code">setReached()</code> or
                       <code class="code">setFailed()</code> methods are
                       used to set the current status of a given state.
                     
            </p>
            <div class="sect3">
               <div xmlns="" class="titlepage">
                  <div>
                     <div>
                        <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="d0e14789"></a>Example: use of plan-data in the virtual-mpls-vpn
                        </h4>
                     </div>
                  </div>
               </div>
               <p>
                            The following shows the use of plan-data in the
                            <code class="filename">examples.ncs/service-provider/virtual-mpls-vpn</code>
                            example. The objective in this example is to create and maintain a
                            plan that has one main <span class="emphasis"><em>self</em></span> component
                            together with one component for each endpoint in the service.
                            The endpoints can make use of either physical or virtual
                            devices. If the endpoint uses a virtual device the corresponding plan
                            component will contain additional states to reflect the
                            staged setup of the virtual device.
                          
               </p>
               <p>
                            In the service YANG file named
                            <code class="filename">l3vpn.yang</code> we define the identity for
                            the endpoint component type and the service specific states
                            for the different components:
                            
               </p><pre class="programlisting">            ....

  identity l3vpn {
    base ncs:component-type;
  }

  identity pe-created {
    base ncs:plan-state;
  }
  identity ce-vpe-topo-added {
    base ncs:plan-state;
  }
  identity vpe-p0-topo-added {
    base ncs:plan-state;
  }
  identity qos-configured {
    base ncs:plan-state;
  }

  container vpn {
    list l3vpn {
      description "Layer3 VPN";

      key name;
      leaf name {
        tailf:info "Unique service id";
        tailf:cli-allow-range;
        type string;
      }

      uses ncs:plan-data;
      uses ncs:service-data;
      ncs:servicepoint l3vpn-servicepoint;

            ....</pre><p>
                            In the service list definition the plan data is introduced
                            using the <code class="code">uses ncs:plan-data</code> directive.
                          
               </p>
               <p>
                            In the service <code class="code">create()</code> method we introduce a Java
                            Properties instance where we temporarily store data for the
                            relevant Reactive FASTMAP steps that currently are completed. We
                            create a private method <code class="code">writePlanData()</code> that
                            can write the plan with this Properties instance as input.
                            Before we return from the <code class="code">create()</code> method we
                            call the <code class="code">writePlanData()</code> method.
                            The following code snippets from the class
                            <code class="filename">l3vpnRFS.java</code> illustrates this design:
                          
               </p>
               <p>
                            Initially we create a Properties instance called
                            rfmProgress:
                            
               </p><pre class="programlisting">  <em xmlns=""><span class="hl-annotation" style="color: gray">@ServiceCallback(servicePoint = "l3vpn-servicepoint",
                   callType = ServiceCBType.CREATE)</span></em>
  <strong xmlns="" class="hl-keyword">public</strong> Properties create(ServiceContext context,
                           NavuNode service,
                           NavuNode ncsRoot, Properties opaque)
    <strong xmlns="" class="hl-keyword">throws</strong> ConfException
  {
    WebUILogger.log(LOGGER, <strong xmlns="" class="hl-string"><em style="color:red">"***** Create/Reactive-re-deploy ************"</em></strong>);

    Properties rfmProgress = <strong xmlns="" class="hl-keyword">new</strong> Properties();</pre><p>
                          
               </p>
               <p>
                            For each Reactive FastMap step that we reach we store some
                            relevant data in the rfmProgress Properties instance:
                            
               </p><pre class="programlisting">    StringBuffer stb = <strong xmlns="" class="hl-keyword">new</strong> StringBuffer();
    <strong xmlns="" class="hl-keyword">for</strong> (NavuContainer endpoint : endpoints.elements()) {
       <strong xmlns="" class="hl-keyword">if</strong> (stb.length() &gt; <span xmlns="" class="hl-number">0</span>) {
           stb.append(<strong xmlns="" class="hl-string"><em style="color:red">","</em></strong>);
       }
       stb.append(endpoint.leaf(l3vpn._id).valueAsString());
    }
    rfmProgress.setProperty(<strong xmlns="" class="hl-string"><em style="color:red">"endpoints"</em></strong>, stb.toString());

    String tenant = service.leaf(l3vpn._name).valueAsString();
    String deploymentName = <strong xmlns="" class="hl-string"><em style="color:red">"vpn"</em></strong>;

    String virtualPEName =
            Helper.makeDevName(tenant, deploymentName, <strong xmlns="" class="hl-string"><em style="color:red">"CSR"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"esc0"</em></strong>);

    <strong xmlns="" class="hl-keyword">for</strong> (NavuContainer endpoint : endpoints.elements()) {
      <strong xmlns="" class="hl-keyword">try</strong> {
        String endpointId = endpoint.leaf(l3vpn._id).valueAsString();

        String ceName = endpoint.leaf(l3vpn._ce_device).valueAsString();

        <strong xmlns="" class="hl-keyword">if</strong> (CEonVPE.contains(ceName)) {
          rfmProgress.setProperty(endpointId + <strong xmlns="" class="hl-string"><em style="color:red">".ONVPE"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"true"</em></strong>);


          <strong xmlns="" class="hl-keyword">if</strong> (!createVirtualPE(context, service, ncsRoot, ceName, tenant,
                               deploymentName)) {
            <em xmlns="" class="hl-comment" style="color: silver">// We cannot continue with this CE until redeploy</em>
            <strong xmlns="" class="hl-keyword">continue</strong>;
          }
          rfmProgress.setProperty(endpointId + <strong xmlns="" class="hl-string"><em style="color:red">".pe-created"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"DONE"</em></strong>);

          LOGGER.info(<strong xmlns="" class="hl-string"><em style="color:red">"device ready, continue: "</em></strong> + virtualPEName);

          addToTopologyRole(ncsRoot, virtualPEName, <strong xmlns="" class="hl-string"><em style="color:red">"pe"</em></strong>);

          <em xmlns="" class="hl-comment" style="color: silver">// Add CE-VPE topology, reuse old topology connection if available</em>
          NavuContainer conn = getConnection(
            topology, endpoint.leaf(l3vpn._ce_device).valueAsString(), <strong xmlns="" class="hl-string"><em style="color:red">"pe"</em></strong>);
          <strong xmlns="" class="hl-keyword">if</strong> (!addToTopology(service, ncsRoot, conn,
                ceName, <strong xmlns="" class="hl-string"><em style="color:red">"GigabitEthernet0/8"</em></strong>,
                virtualPEName, <strong xmlns="" class="hl-string"><em style="color:red">"GigabitEthernet2"</em></strong>,
                ceName, Settings.ipPoolPE_CE)) {
            <em xmlns="" class="hl-comment" style="color: silver">// We cannot continue with this CE until redeploy</em>
            <strong xmlns="" class="hl-keyword">continue</strong>;
          }
          rfmProgress.setProperty(endpointId + <strong xmlns="" class="hl-string"><em style="color:red">".ce-vpe-topo-added"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"DONE"</em></strong>);</pre><p>
                          
               </p>
               <p>
                            Before we return from the <code class="code">create()</code> method we call the
                            <code class="code">writePlanData()</code> method passing in the
                            rfmProgress instance:
                            
               </p><pre class="programlisting">    writePlanData(service, rfmProgress);

    <strong xmlns="" class="hl-keyword">return</strong> opaque;
  }</pre><p>
                          
               </p>
               <p>
                            The <code class="code">writePlanData()</code> method first creates all
                            components and sets the default values for all statuses.
                            Then we read the rfmProgress instance and change the states for
                            the all the Reactive FASTMAP steps that we have reached.
                            In the end we check if the self component <code class="code">ready</code>
                            state has been reached.
                            The reason for initially writing the complete plan with
                            default values for the statuses is not to miss a component
                            that have not made any progress yet, remember this is
                            FASTMAP, components and states that was written in an
                            earlier <code class="code">reactive-re-deploy</code> but is not written
                            now will be deleted by NSO.
                            The <code class="code">writePlanData()</code> method has the following design:
                            
               </p><pre class="programlisting">  <strong xmlns="" class="hl-keyword">private</strong> <strong xmlns="" class="hl-keyword">void</strong> writePlanData(NavuNode service, Properties rfmProgress)
      <strong xmlns="" class="hl-keyword">throws</strong> NavuException {
      <strong xmlns="" class="hl-keyword">try</strong> {

          PlanComponent self = <strong xmlns="" class="hl-keyword">new</strong> PlanComponent(service, <strong xmlns="" class="hl-string"><em style="color:red">"self"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"ncs:self"</em></strong>);
          <em xmlns="" class="hl-comment" style="color: silver">// Initial plan</em>
          self.appendState(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:init"</em></strong>).
               appendState(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:ready"</em></strong>);
          self.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:init"</em></strong>);

          String eps = rfmProgress.getProperty(<strong xmlns="" class="hl-string"><em style="color:red">"endpoints"</em></strong>);
          String ep[] = eps.split(<strong xmlns="" class="hl-string"><em style="color:red">","</em></strong>);

          <strong xmlns="" class="hl-keyword">boolean</strong> ready = true;
          <strong xmlns="" class="hl-keyword">for</strong> (String p : ep) {
              <strong xmlns="" class="hl-keyword">boolean</strong> onvpe = false;
              <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".ONVPE"</em></strong>)) {
                  onvpe = true;
              }
              PlanComponent pcomp = <strong xmlns="" class="hl-keyword">new</strong> PlanComponent(service,
                                                      <strong xmlns="" class="hl-string"><em style="color:red">"endpoint-"</em></strong> + p,
                                                      <strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:l3vpn"</em></strong>);
              <em xmlns="" class="hl-comment" style="color: silver">// Initial plan</em>
              pcomp.appendState(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:init"</em></strong>);
              pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:init"</em></strong>);
              <strong xmlns="" class="hl-keyword">if</strong> (onvpe) {
                  pcomp.appendState(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:pe-created"</em></strong>).
                  appendState(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:ce-vpe-topo-added"</em></strong>).
                  appendState(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:vpe-p0-topo-added"</em></strong>);
              }
              pcomp.appendState(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:qos-configured"</em></strong>).
                    appendState(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:ready"</em></strong>);

              <strong xmlns="" class="hl-keyword">boolean</strong> p_ready = true;
              <strong xmlns="" class="hl-keyword">if</strong> (onvpe) {
                  <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".pe-created"</em></strong>)) {
                      pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:pe-created"</em></strong>);
                  } <strong xmlns="" class="hl-keyword">else</strong> {
                      p_ready = false;
                  }
                  <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".ce-vpe-topo-added"</em></strong>)) {
                      pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:ce-vpe-topo-added"</em></strong>);
                  } <strong xmlns="" class="hl-keyword">else</strong> {
                      p_ready = false;
                  }
                  <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".vpe-p0-topo-added"</em></strong>)) {
                      pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:vpe-p0-topo-added"</em></strong>);
                  } <strong xmlns="" class="hl-keyword">else</strong> {
                      p_ready = false;
                  }
              }
              <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".qos-configured"</em></strong>)) {
                  pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:qos-configured"</em></strong>);
              } <strong xmlns="" class="hl-keyword">else</strong> {
                  p_ready = false;
              }

              <strong xmlns="" class="hl-keyword">if</strong> (p_ready) {
                  pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:ready"</em></strong>);
              } <strong xmlns="" class="hl-keyword">else</strong> {
                  ready = false;
              }
          }

          <strong xmlns="" class="hl-keyword">if</strong> (ready) {
              self.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:ready"</em></strong>);
          }
      } <strong xmlns="" class="hl-keyword">catch</strong> (Exception e) {
          <strong xmlns="" class="hl-keyword">throw</strong> <strong xmlns="" class="hl-keyword">new</strong> NavuException(<strong xmlns="" class="hl-string"><em style="color:red">"could not update plan."</em></strong>, e);
      }

  }</pre><p>
                          
               </p>
               <p>
                            Running the example and showing the plan while the chain of
                            <code class="code">reactive-re-deploy</code> is still in execution could look
                            something like the following:
                  
               </p><pre class="screen">ncs# <strong class="userinput"><code>show vpn l3vpn volvo plan</code></strong>
NAME                    TYPE   STATE              STATUS       WHEN
------------------------------------------------------------------------------------
self                    self   init               reached      2016-04-08T09:22:40
                               ready              not-reached  -
endpoint-branch-office  l3vpn  init               reached      2016-04-08T09:22:40
                               qos-configured     reached      2016-04-08T09:22:40
                               ready              reached      2016-04-08T09:22:40
endpoint-head-office    l3vpn  init               reached      2016-04-08T09:22:40
                               pe-created         not-reached  -
                               ce-vpe-topo-added  not-reached  -
                               vpe-p0-topo-added  not-reached  -
                               qos-configured     not-reached  -
                               ready              not-reached  -</pre><p>
                  
                          
               </p>
            </div>
         </div><script type="text/javascript" src="common/main.js">
            <!----></script><script type="text/javascript" src="common/splitterInit.js">
            <!----></script><div class="footer" id="footer-legal">
            <div class="footer-legal framework-footer-cq">
               <div id="framework-footer">
                  <div id="footer-legal"><a href="http://www.cisco.com/web/siteassets/legal/terms_condition.html">Terms &amp; Conditions</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html">Privacy Statement</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html#cookies">Cookie Policy</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/trademark.html">Trademarks</a></div>
               </div>
            </div>
         </div>
      </div>
      <div id="sidebar">
         <div id="leftnavigation" style="padding-top:3px;">
            <div id="tabs">
               <ul style="visibility: hidden;"></ul>
               <div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;" /><div id="ulTreeDiv" style="display:none">
                     <ul id="tree" class="filetree">
                        <li><span class="file"><a href="ncs.development.preface.html" tabindex="1">Preface</a></span></li>
                        <li><span class="file"><a href="ncs.development.cdb_intro.html" tabindex="1">The Configuration Database and YANG</a></span><ul>
                              <li><span class="file"><a href="ch01s01.html" tabindex="1">Key Features of the CDB</a></span></li>
                              <li><span class="file"><a href="ch01s02.html" tabindex="1">Compilation and Loading of YANG Modules</a></span></li>
                              <li><span class="file"><a href="ch01s03.html" tabindex="1">Showcase: Extending the CDB with Packages</a></span><ul>
                                    <li><span class="file"><a href="ch01s03.html#d0e206" tabindex="1">Step 1: Create a package</a></span></li>
                                    <li><span class="file"><a href="ch01s03.html#d0e226" tabindex="1">Step 2: Add package to NSO</a></span></li>
                                    <li><span class="file"><a href="ch01s03.html#d0e255" tabindex="1">Step 3: Set data</a></span></li>
                                    <li><span class="file"><a href="ch01s03.html#d0e283" tabindex="1">Step 4: Inspect the YANG module</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch01s04.html" tabindex="1">Data Modeling Basics</a></span></li>
                              <li><span class="file"><a href="ch01s05.html" tabindex="1">Showcase: Building and Testing a Model</a></span><ul>
                                    <li><span class="file"><a href="ch01s05.html#d0e436" tabindex="1">Step 1: Create a model skeleton</a></span></li>
                                    <li><span class="file"><a href="ch01s05.html#d0e467" tabindex="1">Step 2: Fill out the model</a></span></li>
                                    <li><span class="file"><a href="ch01s05.html#d0e489" tabindex="1">Step 3: Compile and load the model</a></span></li>
                                    <li><span class="file"><a href="ch01s05.html#d0e521" tabindex="1">Step 4: Test the model</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch01s06.html" tabindex="1">Initialization Files</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.python_intro.html" tabindex="1">Basic Automation with Python</a></span><ul>
                              <li><span class="file"><a href="ch02s01.html" tabindex="1">Setup</a></span></li>
                              <li><span class="file"><a href="ch02s02.html" tabindex="1">Transactions</a></span></li>
                              <li><span class="file"><a href="ch02s03.html" tabindex="1">Read and Write Values</a></span></li>
                              <li><span class="file"><a href="ch02s04.html" tabindex="1">Lists</a></span></li>
                              <li><span class="file"><a href="ch02s05.html" tabindex="1">Showcase: Configuring DNS with Python</a></span><ul>
                                    <li><span class="file"><a href="ch02s05.html#d0e883" tabindex="1">Step 1: Start the routers</a></span></li>
                                    <li><span class="file"><a href="ch02s05.html#d0e932" tabindex="1">Step 2: Inspect the device data model</a></span></li>
                                    <li><span class="file"><a href="ch02s05.html#d0e997" tabindex="1">Step 3: Create the script</a></span></li>
                                    <li><span class="file"><a href="ch02s05.html#d0e1086" tabindex="1">Step 4: Run and verify the script</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch02s06.html" tabindex="1">The Magic Behind the API</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.service_intro.html" tabindex="1">Creating a Service</a></span><ul>
                              <li><span class="file"><a href="ch03s01.html" tabindex="1">Why services?</a></span></li>
                              <li><span class="file"><a href="ch03s02.html" tabindex="1">The Service Package</a></span></li>
                              <li><span class="file"><a href="ch03s03.html" tabindex="1">Service Parameters</a></span></li>
                              <li><span class="file"><a href="ch03s04.html" tabindex="1">Showcase: A Simple DNS Configuration Service</a></span><ul>
                                    <li><span class="file"><a href="ch03s04.html#d0e1370" tabindex="1">Step 1: Prepare simulated routers</a></span></li>
                                    <li><span class="file"><a href="ch03s04.html#d0e1414" tabindex="1">Step 2: Create a service package</a></span></li>
                                    <li><span class="file"><a href="ch03s04.html#d0e1480" tabindex="1">Step 3: Add the DNS server parameter</a></span></li>
                                    <li><span class="file"><a href="ch03s04.html#d0e1514" tabindex="1">Step 4: Add Python code</a></span></li>
                                    <li><span class="file"><a href="ch03s04.html#d0e1556" tabindex="1">Step 5: Deploy the service</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch03s05.html" tabindex="1">Service Templates</a></span></li>
                              <li><span class="file"><a href="ch03s06.html" tabindex="1">Showcase: DNS Configuration Service with Templates</a></span><ul>
                                    <li><span class="file"><a href="ch03s06.html#d0e1749" tabindex="1">Step 1: Prepare simulated routers</a></span></li>
                                    <li><span class="file"><a href="ch03s06.html#d0e1793" tabindex="1">Step 2: Create a service</a></span></li>
                                    <li><span class="file"><a href="ch03s06.html#d0e1871" tabindex="1">Step 3: Create a template</a></span></li>
                                    <li><span class="file"><a href="ch03s06.html#d0e1963" tabindex="1">Step 4: Test the service</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.applications.html" tabindex="1">Applications in NSO</a></span><ul>
                              <li><span class="file"><a href="ch04s01.html" tabindex="1">NSO Architecture</a></span></li>
                              <li><span class="file"><a href="ch04s02.html" tabindex="1">Callbacks as Extension Mechanism</a></span></li>
                              <li><span class="file"><a href="ch04s03.html" tabindex="1">Actions</a></span></li>
                              <li><span class="file"><a href="ch04s04.html" tabindex="1">Showcase: Implementing Device Count Action</a></span><ul>
                                    <li><span class="file"><a href="ch04s04.html#d0e2242" tabindex="1">Step 1: Create a new Python package</a></span></li>
                                    <li><span class="file"><a href="ch04s04.html#d0e2287" tabindex="1">Step 2: Define a new action in YANG</a></span></li>
                                    <li><span class="file"><a href="ch04s04.html#d0e2329" tabindex="1">Step 3: Implement the action logic</a></span></li>
                                    <li><span class="file"><a href="ch04s04.html#d0e2369" tabindex="1">Step 4: Register callback</a></span></li>
                                    <li><span class="file"><a href="ch04s04.html#d0e2424" tabindex="1">Step 5: And... action!</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.applications.running.html" tabindex="1">Running Application Code</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.javavm.html" tabindex="1">The NSO Java VM</a></span><ul>
                              <li><span class="file"><a href="ug.javavm.overview.html" tabindex="1">Overview</a></span></li>
                              <li><span class="file"><a href="ch05s02.html" tabindex="1">YANG model</a></span></li>
                              <li><span class="file"><a href="ch05s03.html" tabindex="1">Java Packages and the Class Loader</a></span></li>
                              <li><span class="file"><a href="ch05s04.html" tabindex="1">The NED component type</a></span></li>
                              <li><span class="file"><a href="ch05s05.html" tabindex="1">The callback component type</a></span></li>
                              <li><span class="file"><a href="ch05s06.html" tabindex="1">The application component type</a></span></li>
                              <li><span class="file"><a href="ncs.ug.javavm.resman.html" tabindex="1">The Resource Manager</a></span></li>
                              <li><span class="file"><a href="ch05s08.html" tabindex="1">The Alarm centrals</a></span></li>
                              <li><span class="file"><a href="ch05s09.html" tabindex="1">Embedding the NSO Java VM</a></span></li>
                              <li><span class="file"><a href="ch05s10.html" tabindex="1">JMX interface</a></span></li>
                              <li><span class="file"><a href="ch05s11.html" tabindex="1">Logging</a></span></li>
                              <li><span class="file"><a href="ch05s12.html" tabindex="1">The NSO Java VM timeouts</a></span></li>
                              <li><span class="file"><a href="ug.javavm.debug.html" tabindex="1">Debugging Startup</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.pythonvm.html" tabindex="1">The NSO Python VM</a></span><ul>
                              <li><span class="file"><a href="ch06s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch06s02.html" tabindex="1">YANG model</a></span></li>
                              <li><span class="file"><a href="ncs.development.pythonvm.ucode.html" tabindex="1">Structure of the User provided code</a></span><ul>
                                    <li><span class="file"><a href="ncs.development.pythonvm.cthread.html" tabindex="1">The application component</a></span></li>
                                    <li><span class="file"><a href="ncs.development.pythonvm.upgrade.html" tabindex="1">The upgrade component</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.pythonvm.debug.html" tabindex="1">Debugging of Python packages</a></span></li>
                              <li><span class="file"><a href="ncs.development.pythonvm.nonstdpython.html" tabindex="1">Using non-standard Python</a></span><ul>
                                    <li><span class="file"><a href="ch06s05s01.html" tabindex="1">Configure NSO to use a custom start command (recommended)</a></span></li>
                                    <li><span class="file"><a href="ch06s05s02.html" tabindex="1">Changing the path to python3 or
                                                   python</a></span></li>
                                    <li><span class="file"><a href="ch06s05s03.html" tabindex="1">Updating the default start command (not recommended)</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.embedded_erlang.html" tabindex="1">Embedded Erlang applications</a></span><ul>
                              <li><span class="file"><a href="ch07s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch07s02.html" tabindex="1">Erlang API</a></span></li>
                              <li><span class="file"><a href="ch07s03.html" tabindex="1">Application configuration</a></span></li>
                              <li><span class="file"><a href="ch07s04.html" tabindex="1">Example</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.yang.html" tabindex="1">The YANG Data Modeling Language</a></span><ul>
                              <li><span class="file"><a href="ch08s01.html" tabindex="1">The YANG Data Modeling Language</a></span></li>
                              <li><span class="file"><a href="ch08s02.html" tabindex="1">YANG in NSO</a></span></li>
                              <li><span class="file"><a href="ch08s03.html" tabindex="1">YANG Introduction</a></span><ul>
                                    <li><span class="file"><a href="ch08s03s01.html" tabindex="1">Modules and Submodules</a></span></li>
                                    <li><span class="file"><a href="ch08s03s02.html" tabindex="1">Data Modeling Basics</a></span></li>
                                    <li><span class="file"><a href="ch08s03s03.html" tabindex="1">Leaf Nodes</a></span></li>
                                    <li><span class="file"><a href="ch08s03s04.html" tabindex="1">Leaf-list Nodes</a></span></li>
                                    <li><span class="file"><a href="ch08s03s05.html" tabindex="1">Container Nodes</a></span></li>
                                    <li><span class="file"><a href="ch08s03s06.html" tabindex="1">List Nodes</a></span></li>
                                    <li><span class="file"><a href="ch08s03s07.html" tabindex="1">Example Module</a></span></li>
                                    <li><span class="file"><a href="ch08s03s08.html" tabindex="1">State Data</a></span></li>
                                    <li><span class="file"><a href="ch08s03s09.html" tabindex="1">Built-in Types</a></span></li>
                                    <li><span class="file"><a href="ch08s03s10.html" tabindex="1">Derived Types (typedef)</a></span></li>
                                    <li><span class="file"><a href="ch08s03s11.html" tabindex="1">Reusable Node Groups (grouping)</a></span></li>
                                    <li><span class="file"><a href="ch08s03s12.html" tabindex="1">Choices</a></span></li>
                                    <li><span class="file"><a href="ch08s03s13.html" tabindex="1">Extending Data Models (augment)</a></span></li>
                                    <li><span class="file"><a href="ch08s03s14.html" tabindex="1">RPC Definitions</a></span></li>
                                    <li><span class="file"><a href="ch08s03s15.html" tabindex="1">Notification Definitions</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch08s04.html" tabindex="1">Working With YANG Modules</a></span></li>
                              <li><span class="file"><a href="ch08s05.html" tabindex="1">Integrity Constraints</a></span></li>
                              <li><span class="file"><a href="ch08s06.html" tabindex="1">The when statement</a></span></li>
                              <li><span class="file"><a href="ch08s07.html" tabindex="1">Using the Tail-f Extensions with YANG</a></span><ul>
                                    <li><span class="file"><a href="ch08s07s01.html" tabindex="1">Using a YANG annotation file</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch08s08.html" tabindex="1">Custom Help Texts and Error Messages</a></span><ul>
                                    <li><span class="file"><a href="ch08s08s01.html" tabindex="1">Custom Help Texts</a></span></li>
                                    <li><span class="file"><a href="ch08s08s02.html" tabindex="1">Custom Help Text in a Typedef</a></span></li>
                                    <li><span class="file"><a href="ch08s08s03.html" tabindex="1">Custom Error Messages</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch08s09.html" tabindex="1">Hidden Data</a></span><ul>
                                    <li><span class="file"><a href="ch08s09s01.html" tabindex="1">Fully Hidden Nodes</a></span></li>
                                    <li><span class="file"><a href="ch08s09s02.html" tabindex="1">Hiding Nodes from User Interfaces</a></span></li>
                                    <li><span class="file"><a href="ch08s09s03.html" tabindex="1">Conditional display</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch08s10.html" tabindex="1">An Example: Modeling a List of Interfaces</a></span><ul>
                                    <li><span class="file"><a href="ug.yang.relationships.html" tabindex="1">Modeling Relationships</a></span></li>
                                    <li><span class="file"><a href="ch08s10s02.html" tabindex="1">Ensuring Uniqueness</a></span></li>
                                    <li><span class="file"><a href="ch08s10s03.html" tabindex="1">Default Values</a></span></li>
                                    <li><span class="file"><a href="ch08s10s04.html" tabindex="1">The Final Interface YANG model</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.yang.leafrefs.html" tabindex="1">More on leafrefs</a></span></li>
                              <li><span class="file"><a href="ch08s12.html" tabindex="1">Using Multiple Namespaces</a></span></li>
                              <li><span class="file"><a href="ug.yang.Names_Namespaces_And_Revisions.html" tabindex="1">Module Names, Namespaces and Revisions</a></span></li>
                              <li><span class="file"><a href="ug.yang.id_value.html" tabindex="1">Hash Values and the id-value Statement</a></span></li>
                              <li><span class="file"><a href="ug.yang.caveats.html" tabindex="1">NSO caveats</a></span><ul>
                                    <li><span class="file"><a href="ch08s15s01.html" tabindex="1">The union type and value conversion</a></span></li>
                                    <li><span class="file"><a href="ch08s15s02.html" tabindex="1">User defined types</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.cdb.html" tabindex="1">Using CDB</a></span><ul>
                              <li><span class="file"><a href="ch09s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ncs.ug.architecture.im.html" tabindex="1">The NSO Data Model</a></span></li>
                              <li><span class="file"><a href="ch09s03.html" tabindex="1">Addressing Data Using Keypaths</a></span></li>
                              <li><span class="file"><a href="ug.cdb.subscriptions.html" tabindex="1">Subscriptions</a></span></li>
                              <li><span class="file"><a href="ch09s05.html" tabindex="1">Sessions</a></span></li>
                              <li><span class="file"><a href="ug.cdb.init.html" tabindex="1">Loading Initial Data Into CDB</a></span></li>
                              <li><span class="file"><a href="ug.cdb.opdata.html" tabindex="1">Operational Data in CDB</a></span><ul>
                                    <li><span class="file"><a href="ch09s07s01.html" tabindex="1">Subscriptions</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch09s08.html" tabindex="1">Example</a></span><ul>
                                    <li><span class="file"><a href="ch09s08s01.html" tabindex="1">Operational Data</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.cdb.upgrade.html" tabindex="1">Automatic Schema Upgrades and Downgrades</a></span></li>
                              <li><span class="file"><a href="ch09s10.html" tabindex="1">Using Initialization Files for Upgrade</a></span></li>
                              <li><span class="file"><a href="ncs.cdb.upgrade.comp.html" tabindex="1">Writing an Upgrade Package Component</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.java_api_overview.html" tabindex="1">Java API Overview</a></span><ul>
                              <li><span class="file"><a href="ch10s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ug.ncs.api.maapi.html" tabindex="1">MAAPI</a></span></li>
                              <li><span class="file"><a href="ch10s03.html" tabindex="1">CDB API</a></span></li>
                              <li><span class="file"><a href="ug.java_api_overview.dp.html" tabindex="1">DP API</a></span><ul>
                                    <li><span class="file"><a href="ch10s04s01.html" tabindex="1">Transaction and Data Callbacks</a></span></li>
                                    <li><span class="file"><a href="ch10s04s02.html" tabindex="1">Service and Action Callbacks</a></span></li>
                                    <li><span class="file"><a href="ch10s04s03.html" tabindex="1">Validation Callbacks</a></span></li>
                                    <li><span class="file"><a href="ch10s04s04.html" tabindex="1">Transforms</a></span></li>
                                    <li><span class="file"><a href="ch10s04s05.html" tabindex="1">Hooks</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s05.html" tabindex="1">NED API</a></span></li>
                              <li><span class="file"><a href="ug.java_api_overview.navu.html" tabindex="1">NAVU API</a></span></li>
                              <li><span class="file"><a href="ch10s07.html" tabindex="1">ALARM API</a></span></li>
                              <li><span class="file"><a href="ug.java_api_overview.notif.html" tabindex="1">NOTIF API</a></span></li>
                              <li><span class="file"><a href="ch10s09.html" tabindex="1">HA API</a></span></li>
                              <li><span class="file"><a href="ch10s10.html" tabindex="1">Java API Conf Package</a></span></li>
                              <li><span class="file"><a href="ch10s11.html" tabindex="1">Namespace classes and the loaded schema</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.python_api_overview.html" tabindex="1">Python API Overview</a></span><ul>
                              <li><span class="file"><a href="ch11s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch11s02.html" tabindex="1">Python API overview</a></span></li>
                              <li><span class="file"><a href="ch11s03.html" tabindex="1">Python scripting</a></span></li>
                              <li><span class="file"><a href="ch11s04.html" tabindex="1">High-level MAAPI API</a></span></li>
                              <li><span class="file"><a href="ch11s05.html" tabindex="1">Maagic API</a></span><ul>
                                    <li><span class="file"><a href="ch11s05s01.html" tabindex="1">Namespaces</a></span></li>
                                    <li><span class="file"><a href="ch11s05s02.html" tabindex="1">Reading data</a></span></li>
                                    <li><span class="file"><a href="ch11s05s03.html" tabindex="1">Writing data</a></span></li>
                                    <li><span class="file"><a href="ch11s05s04.html" tabindex="1">Deleting data</a></span></li>
                                    <li><span class="file"><a href="ch11s05s05.html" tabindex="1">Containers</a></span></li>
                                    <li><span class="file"><a href="ch11s05s06.html" tabindex="1">Presence containers</a></span></li>
                                    <li><span class="file"><a href="ch11s05s07.html" tabindex="1">Choices</a></span></li>
                                    <li><span class="file"><a href="ch11s05s08.html" tabindex="1">Lists and List elements</a></span></li>
                                    <li><span class="file"><a href="ch11s05s09.html" tabindex="1">Unions</a></span></li>
                                    <li><span class="file"><a href="ch11s05s10.html" tabindex="1">Enumeration</a></span></li>
                                    <li><span class="file"><a href="ch11s05s11.html" tabindex="1">Leafref</a></span></li>
                                    <li><span class="file"><a href="ch11s05s12.html" tabindex="1">Identityref</a></span></li>
                                    <li><span class="file"><a href="ch11s05s13.html" tabindex="1">Instance-identifier</a></span></li>
                                    <li><span class="file"><a href="ch11s05s14.html" tabindex="1">Leaf-list</a></span></li>
                                    <li><span class="file"><a href="ch11s05s15.html" tabindex="1">Binary</a></span></li>
                                    <li><span class="file"><a href="ch11s05s16.html" tabindex="1">Bits</a></span></li>
                                    <li><span class="file"><a href="ch11s05s17.html" tabindex="1">Empty leaf</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch11s06.html" tabindex="1">Maagic examples</a></span><ul>
                                    <li><span class="file"><a href="ch11s06s01.html" tabindex="1">Action requests</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch11s07.html" tabindex="1">PlanComponent</a></span></li>
                              <li><span class="file"><a href="ch11s08.html" tabindex="1">Python packages</a></span><ul>
                                    <li><span class="file"><a href="ch11s08s01.html" tabindex="1">Action handler</a></span></li>
                                    <li><span class="file"><a href="ch11s08s02.html" tabindex="1">Service handler</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch11s09.html" tabindex="1">Low-level APIs</a></span><ul>
                                    <li><span class="file"><a href="ch11s09s01.html" tabindex="1">Low-level MAAPI API</a></span></li>
                                    <li><span class="file"><a href="ch11s09s02.html" tabindex="1">Low-level CDB API</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.packages.html" tabindex="1">NSO Packages</a></span><ul>
                              <li><span class="file"><a href="ug.packages.overview.html" tabindex="1">Package Overview</a></span></li>
                              <li><span class="file"><a href="ch12s02.html" tabindex="1">An Example Package</a></span></li>
                              <li><span class="file"><a href="ch12s03.html" tabindex="1">The package-meta-data.xml file</a></span></li>
                              <li><span class="file"><a href="ch12s04.html" tabindex="1">Components</a></span></li>
                              <li><span class="file"><a href="ug.packages.creating.html" tabindex="1">Creating Packages </a></span><ul>
                                    <li><span class="file"><a href="ch12s05s01.html" tabindex="1">Creating a NETCONF NED Package</a></span></li>
                                    <li><span class="file"><a href="ch12s05s02.html" tabindex="1">Creating an SNMP NED Package</a></span></li>
                                    <li><span class="file"><a href="ch12s05s03.html" tabindex="1">Creating a CLI NED Package or a Generic NED Package</a></span></li>
                                    <li><span class="file"><a href="ch12s05s04.html" tabindex="1">Creating a Service Package or a Data Provider Package</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.package_dev.html" tabindex="1">Package Development</a></span><ul>
                              <li><span class="file"><a href="ch13s01.html" tabindex="1">Developing a Service Package</a></span></li>
                              <li><span class="file"><a href="ch13s02.html" tabindex="1">ncs-setup</a></span></li>
                              <li><span class="file"><a href="ch13s03.html" tabindex="1">The netsim Part of a NED Package</a></span></li>
                              <li><span class="file"><a href="ug.scripting_devel.html" tabindex="1">Plug-and-play scripting</a></span></li>
                              <li><span class="file"><a href="ch13s05.html" tabindex="1">Creating a Service Package</a></span></li>
                              <li><span class="file"><a href="ch13s06.html" tabindex="1">Java Service Implementation</a></span></li>
                              <li><span class="file"><a href="ch13s07.html" tabindex="1">Developing our First Service Application</a></span></li>
                              <li><span class="file"><a href="ch13s08.html" tabindex="1">Tracing Within the NSO Service Manager</a></span></li>
                              <li><span class="file"><a href="ch13s09.html" tabindex="1">Controlling error messages info level from Java</a></span></li>
                              <li><span class="file"><a href="ug.package_dev.loading.html" tabindex="1">Loading Packages</a></span></li>
                              <li><span class="file"><a href="ch13s11.html" tabindex="1">Debugging the Service and Using Eclipse IDE</a></span><ul>
                                    <li><span class="file"><a href="ch13s11s01.html" tabindex="1">Running the NSO Java VM Standalone</a></span></li>
                                    <li><span class="file"><a href="ch13s11s02.html" tabindex="1">Using Eclipse to Debug the Package Java Code</a></span></li>
                                    <li><span class="file"><a href="ch13s11s03.html" tabindex="1">Remote Connecting with Eclipse to the NSO Java VM</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch13s12.html" tabindex="1">Working with ncs-project</a></span><ul>
                                    <li><span class="file"><a href="ch13s12s01.html" tabindex="1">Create a new project</a></span></li>
                                    <li><span class="file"><a href="ch13s12s02.html" tabindex="1">Project setup</a></span></li>
                                    <li><span class="file"><a href="ch13s12s03.html" tabindex="1">Export</a></span></li>
                                    <li><span class="file"><a href="ch13s12s04.html" tabindex="1">NSO Project man pages</a></span></li>
                                    <li><span class="file"><a href="ch13s12s05.html" tabindex="1">The project-meta-data.xml file</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.services.html" tabindex="1">Developing NSO Services</a></span><ul>
                              <li><span class="file"><a href="ch14s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch14s02.html" tabindex="1">Definitions</a></span></li>
                              <li><span class="file"><a href="ch14s03.html" tabindex="1">The Fundamentals</a></span><ul>
                                    <li><span class="file"><a href="ch14s03s01.html" tabindex="1">Mapping</a></span></li>
                                    <li><span class="file"><a href="ch14s03s02.html" tabindex="1">
                                                     FASTMAP and Transactions
                                                   </a></span></li>
                                    <li><span class="file"><a href="ch14s03s03.html" tabindex="1">Auto-rendering from the Service Model</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch14s04.html" tabindex="1">Writing the Service Model</a></span></li>
                              <li><span class="file"><a href="ch14s05.html" tabindex="1">Finding the Mapping</a></span><ul>
                                    <li><span class="file"><a href="ch14s05s01.html" tabindex="1">
                                                     Mapping Iterations
                                                   </a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch14s06.html" tabindex="1">Strategies to Implement the Mapping</a></span></li>
                              <li><span class="file"><a href="ch14s07.html" tabindex="1">Creating an NSO Service Application</a></span></li>
                              <li><span class="file"><a href="ncs.development.services.mapping_template.html" tabindex="1">
                                           Mapping using Service Templates</a></span><ul>
                                    <li><span class="file"><a href="ch14s08s01.html" tabindex="1">Preparation</a></span></li>
                                    <li><span class="file"><a href="ch14s08s02.html" tabindex="1">Defining the Service Model</a></span></li>
                                    <li><span class="file"><a href="ch14s08s03.html" tabindex="1">Defining the Template</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.services.mapping_java.html" tabindex="1">Mapping using Java</a></span><ul>
                                    <li><span class="file"><a href="ch14s09s01.html" tabindex="1">Overview</a></span></li>
                                    <li><span class="file"><a href="ch14s09s02.html" tabindex="1">Setting up the environment</a></span></li>
                                    <li><span class="file"><a href="ch14s09s03.html" tabindex="1">Creating a service package</a></span></li>
                                    <li><span class="file"><a href="ch14s09s04.html" tabindex="1">The Service Model</a></span></li>
                                    <li><span class="file"><a href="ch14s09s05.html" tabindex="1">Managing the NSO Java VM</a></span></li>
                                    <li><span class="file"><a href="ch14s09s06.html" tabindex="1">A first look at Java Development</a></span></li>
                                    <li><span class="file"><a href="ch14s09s07.html" tabindex="1">Using Eclipse</a></span></li>
                                    <li><span class="file"><a href="ch14s09s08.html" tabindex="1">Writing the service code</a></span><ul>
                                          <li><span class="file"><a href="ch14s09s08.html#d0e13656" tabindex="1">Fetching the service attributes</a></span></li>
                                          <li><span class="file"><a href="ch14s09s08.html#d0e13744" tabindex="1">Mapping service attributes to device configuration</a></span></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch14s10.html" tabindex="1">Mapping using Java combined with Templates</a></span><ul>
                                    <li><span class="file"><a href="ch14s10s01.html" tabindex="1">Overview</a></span></li>
                                    <li><span class="file"><a href="ch14s10s02.html" tabindex="1">The VLAN Feature Template</a></span></li>
                                    <li><span class="file"><a href="ch14s10s03.html" tabindex="1">The VLAN Java Logic</a></span></li>
                                    <li><span class="file"><a href="ch14s10s04.html" tabindex="1">Steps to Build a Java and Template Solution</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch14s11.html" tabindex="1">Service Mapping: Putting Things Together</a></span><ul>
                                    <li><span class="file"><a href="ch14s11s01.html" tabindex="1">Auxiliary Service Data</a></span></li>
                                    <li><span class="file"><a href="ch14s11s02.html" tabindex="1">Topology</a></span></li>
                                    <li><span class="file"><a href="ch14s11s03.html" tabindex="1">Creating a Multi-Vendor Service</a></span><ul>
                                          <li><span class="file"><a href="ch14s11s03.html#d0e14145" tabindex="1">YANG Service Model Design</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch14s11s04.html" tabindex="1">Defining the Mapping</a></span><ul>
                                          <li><span class="file"><a href="ch14s11s04.html#d0e14330" tabindex="1">The Java Code</a></span></li>
                                          <li><span class="file"><a href="ch14s11s04.html#d0e14360" tabindex="1">Configuration Templates</a></span></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch14s12.html" tabindex="1">FASTMAP Description</a></span></li>
                              <li><span class="file"><a href="ncs.development.reactive_fastmap.html" tabindex="1">
                                           Reactive FASTMAP
                                         </a></span><ul>
                                    <li id="webhelp-currentid"><span class="file"><a href="ncs.development.reactive_fastmap.plan.html" tabindex="1">Progress reporting using plan-data</a></span><ul>
                                          <li><span class="file"><a href="ncs.development.reactive_fastmap.plan.html#d0e14789" tabindex="1">Example: use of plan-data in the virtual-mpls-vpn</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ncs.development.service_progress_monitoring.html" tabindex="1">Service Progress Monitoring</a></span></li>
                                    <li><span class="file"><a href="ch14s13s03.html" tabindex="1">Performance Considerations</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch14s14.html" tabindex="1">Services that involve virtual devices, NFV</a></span><ul>
                                    <li><span class="file"><a href="ch14s14s01.html" tabindex="1">
                                                   Starting a virtual machine
                                                 </a></span></li>
                                    <li><span class="file"><a href="ch14s14s02.html" tabindex="1">
                                                   Stopping a virtual machine
                                                 </a></span></li>
                                    <li><span class="file"><a href="ch14s14s03.html" tabindex="1">
                                                   How to handle Licenses
                                                 </a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.services.advanced_mapping.html" tabindex="1">
                                           Advanced Mapping Techniques
                                         </a></span><ul>
                                    <li><span class="file"><a href="ch14s15s01.html" tabindex="1">
                                                   Create Methods
                                                 </a></span></li>
                                    <li><span class="file"><a href="ncs.development.services.opaque.html" tabindex="1">
                                                   Persistent FASTMAP Properties
                                                 </a></span></li>
                                    <li><span class="file"><a href="ncs.development.services.prepost.html" tabindex="1">
                                                   Pre and post hooks
                                                 </a></span></li>
                                    <li><span class="file"><a href="ncs.development.services.stacked_services.html" tabindex="1">Stacked Services and Shared Structures</a></span></li>
                                    <li><span class="file"><a href="ch14s15s05.html" tabindex="1">FASTMAP pre-lock create option</a></span></li>
                                    <li><span class="file"><a href="ch14s15s06.html" tabindex="1">
                                                   Service Caveats
                                                 </a></span><ul>
                                          <li><span class="file"><a href="ch14s15s06.html#d0e15446" tabindex="1">
                                                           Finding Caveats
                                                         </a></span></li>
                                          <li><span class="file"><a href="ch14s15s06.html#d0e15474" tabindex="1">delete</a></span></li>
                                          <li><span class="file"><a href="ch14s15s06.html#d0e15525" tabindex="1">set</a></span></li>
                                          <li><span class="file"><a href="ch14s15s06.html#d0e15536" tabindex="1">create</a></span></li>
                                          <li><span class="file"><a href="ch14s15s06.html#d0e15547" tabindex="1">move</a></span></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch14s16.html" tabindex="1">Service Discovery</a></span><ul>
                                    <li><span class="file"><a href="ch14s16s01.html" tabindex="1">Discovery basics</a></span></li>
                                    <li><span class="file"><a href="ch14s16s02.html" tabindex="1">Reconciliation caveats</a></span></li>
                                    <li><span class="file"><a href="ch14s16s03.html" tabindex="1">Reconciling in bulk</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.services.partialsync.html" tabindex="1">Partial sync</a></span><ul>
                                    <li><span class="file"><a href="ch14s17s01.html" tabindex="1">Partial sync-from</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.templates.html" tabindex="1">Templates</a></span><ul>
                              <li><span class="file"><a href="ncs.development.templates.intro.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ug.templates.dev.config.templates.html" tabindex="1">Config templates</a></span><ul>
                                    <li><span class="file"><a href="ncs.development.templates.dev.tmpl.html" tabindex="1">Create a Config-template from a Device-template</a></span></li>
                                    <li><span class="file"><a href="ch15s02s02.html" tabindex="1">Create a Config-template from a device configuration</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.templates.basicPrinciples.html" tabindex="1">Basic principles</a></span><ul>
                                    <li><span class="file"><a href="ncs.development.templates.values.html" tabindex="1">Values in a template</a></span></li>
                                    <li><span class="file"><a href="ch15s03s02.html" tabindex="1">Processing instructions</a></span></li>
                                    <li><span class="file"><a href="ncs.development.templates.contexts.html" tabindex="1">XPath Context in config-templates</a></span></li>
                                    <li><span class="file"><a href="ncs.development.templates.conditional.html" tabindex="1">Conditional Statements</a></span></li>
                                    <li><span class="file"><a href="ncs.development.templates.loops.html" tabindex="1">Loop Statements</a></span></li>
                                    <li><span class="file"><a href="ch15s03s06.html" tabindex="1">Capabilities and Namespaces</a></span></li>
                                    <li><span class="file"><a href="ch15s03s07.html" tabindex="1">Template tag operations</a></span></li>
                                    <li><span class="file"><a href="ch15s03s08.html" tabindex="1">Operations on ordered-by user lists and leaf-lists</a></span></li>
                                    <li><span class="file"><a href="ch15s03s09.html" tabindex="1">Debugging templates</a></span><ul>
                                          <li><span class="file"><a href="ch15s03s09.html#d0e17120" tabindex="1">debug template output examples</a></span></li>
                                          <li><span class="file"><a href="ch15s03s09.html#d0e17209" tabindex="1">XPath help</a></span></li>
                                          <li><span class="file"><a href="ch15s03s09.html#d0e17236" tabindex="1">XPath trace log</a></span></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.templates.service.templates.html" tabindex="1">Service Templates</a></span><ul>
                                    <li><span class="file"><a href="ncs.development.templates.service.templates.macros.html" tabindex="1">Macros in Service Templates</a></span></li>
                                    <li><span class="file"><a href="ncs.development.templates.service.preposttemplates.html" tabindex="1">Pre- and Post-Modification Templates</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.templates.api.templates.html" tabindex="1">Templates applied from an API</a></span><ul>
                                    <li><span class="file"><a href="ch15s05s01.html" tabindex="1">Feature Template</a></span></li>
                                    <li><span class="file"><a href="ch15s05s02.html" tabindex="1">Passing deep structures from an API</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.templates.multined.html" tabindex="1">Service and API Templates in multi-NED environment</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.ncs.alarmmgr_dev.html" tabindex="1">Developing Alarm Applications</a></span><ul>
                              <li><span class="file"><a href="ch16s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch16s02.html" tabindex="1">Using the Alarms Sink</a></span></li>
                              <li><span class="file"><a href="ch16s03.html" tabindex="1">Using the Alarms Source</a></span></li>
                              <li><span class="file"><a href="ch16s04.html" tabindex="1">Extending the alarm manager,
                                                  adding user defined alarm types and fields</a></span></li>
                              <li><span class="file"><a href="ch16s05.html" tabindex="1">Mapping alarms to objects</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.snmp_notif_recv.html" tabindex="1">SNMP Notification Receiver</a></span><ul>
                              <li><span class="file"><a href="ncs.development.snmp_notf_recv.introduction.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch17s02.html" tabindex="1">Configuring NSO to Receive SNMP Notifications</a></span></li>
                              <li><span class="file"><a href="ch17s03.html" tabindex="1">Built-in Filters</a></span></li>
                              <li><span class="file"><a href="ch17s04.html" tabindex="1">Notification Handlers</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ch18.html" tabindex="1">The web server</a></span><ul>
                              <li><span class="file"><a href="ch18s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch18s02.html" tabindex="1">Web server capabilities</a></span></li>
                              <li><span class="file"><a href="ch18s03.html" tabindex="1">CGI support</a></span></li>
                              <li><span class="file"><a href="ug.webserver.tls_data_in_db.html" tabindex="1">Storing TLS data in database</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.kicker.html" tabindex="1">Kicker </a></span><ul>
                              <li><span class="file"><a href="ch19s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ug.kicker.actions.html" tabindex="1">Kicker action invocation</a></span></li>
                              <li><span class="file"><a href="ug.kicker.data-concepts.html" tabindex="1">Data Kicker Concepts</a></span><ul>
                                    <li><span class="file"><a href="ch19s03s01.html" tabindex="1">Generalized Monitors</a></span></li>
                                    <li><span class="file"><a href="ch19s03s02.html" tabindex="1">Kicker Constraints/Filters</a></span></li>
                                    <li><span class="file"><a href="ug.data.kicker.named_xpath.html" tabindex="1">Variable Bindings</a></span></li>
                                    <li><span class="file"><a href="ug.kicker.simple_data_example.html" tabindex="1">A Simple Data Kicker Example</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.kicker.notif-concepts.html" tabindex="1">Notification Kicker Concepts</a></span><ul>
                                    <li><span class="file"><a href="ch19s04s01.html" tabindex="1">Notification selector expression</a></span></li>
                                    <li><span class="file"><a href="ug.notif.kicker.named_xpath.html" tabindex="1">Variable Bindings</a></span></li>
                                    <li><span class="file"><a href="ug.kicker.simple_notif_example.html" tabindex="1">A Simple Notification Kicker Example</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.kicker.rfm.html" tabindex="1">Reactive FastMap with Kicker</a></span><ul>
                                    <li><span class="file"><a href="ug.kicker.rfm.use_cases.html" tabindex="1">Use Cases</a></span></li>
                                    <li><span class="file"><a href="ug.kicker.rfm.example.html" tabindex="1">RFM Example</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.kicker.debugging.html" tabindex="1">Debugging kickers</a></span><ul>
                                    <li><span class="file"><a href="ug.kicker.debugging.pipe.html" tabindex="1">Kicker CLI Debug target</a></span></li>
                                    <li><span class="file"><a href="ug.kicker.debugging.unhide.html" tabindex="1">Unhide Kickers</a></span></li>
                                    <li><span class="file"><a href="ch19s06s03.html" tabindex="1">XPath log</a></span></li>
                                    <li><span class="file"><a href="ch19s06s04.html" tabindex="1">Devel Log</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ch20.html" tabindex="1">Scheduler</a></span><ul>
                              <li><span class="file"><a href="ch20s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch20s02.html" tabindex="1">Scheduling Periodic Work</a></span><ul>
                                    <li><span class="file"><a href="ch20s02s01.html" tabindex="1">Schedule Expression</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch20s03.html" tabindex="1">Scheduling Non-recurring Work</a></span></li>
                              <li><span class="file"><a href="ch20s04.html" tabindex="1">Scheduling in a HA Cluster</a></span></li>
                              <li><span class="file"><a href="ch20s05.html" tabindex="1">Troubleshooting</a></span><ul>
                                    <li><span class="file"><a href="ch20s05s01.html" tabindex="1">History log</a></span></li>
                                    <li><span class="file"><a href="ch20s05s02.html" tabindex="1">XPath log</a></span></li>
                                    <li><span class="file"><a href="ch20s05s03.html" tabindex="1">Devel Log</a></span></li>
                                    <li><span class="file"><a href="ch20s05s04.html" tabindex="1">Suspending the Scheduler</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ch21.html" tabindex="1">Progress Trace</a></span><ul>
                              <li><span class="file"><a href="ch21s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch21s02.html" tabindex="1">Configuring Progress Trace</a></span><ul>
                                    <li><span class="file"><a href="ch21s02s01.html" tabindex="1">Unhide Progress Trace</a></span></li>
                                    <li><span class="file"><a href="ch21s02s02.html" tabindex="1">Log to File</a></span></li>
                                    <li><span class="file"><a href="ch21s02s03.html" tabindex="1">Log as Operational Data</a></span></li>
                                    <li><span class="file"><a href="ch21s02s04.html" tabindex="1">Log as Notification Events</a></span></li>
                                    <li><span class="file"><a href="ch21s02s05.html" tabindex="1">Verbosity</a></span></li>
                                    <li><span class="file"><a href="ch21s02s06.html" tabindex="1">Using Filters</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch21s03.html" tabindex="1">Report Progress Events from User Code</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.nano_services.html" tabindex="1">Nano Services for Staged Provisioning</a></span><ul>
                              <li><span class="file"><a href="ch22s01.html" tabindex="1">Basic Concepts</a></span><ul>
                                    <li><span class="file"><a href="ch22s01s01.html" tabindex="1">Plan Outline</a></span></li>
                                    <li><span class="file"><a href="ch22s01s02.html" tabindex="1">Per-State Configuration</a></span></li>
                                    <li><span class="file"><a href="ch22s01s03.html" tabindex="1">Link Plan Outline to Service</a></span></li>
                                    <li><span class="file"><a href="ch22s01s04.html" tabindex="1">Service Instantiation</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch22s02.html" tabindex="1">Benefits and Use Cases</a></span></li>
                              <li><span class="file"><a href="ch22s03.html" tabindex="1">Backtracking and Staged Delete</a></span></li>
                              <li><span class="file"><a href="ch22s04.html" tabindex="1">Managing Side Effects</a></span></li>
                              <li><span class="file"><a href="ch22s05.html" tabindex="1">Multiple and Dynamic Plan Components</a></span></li>
                              <li><span class="file"><a href="ch22s06.html" tabindex="1">Netsim Router Provisioning Example</a></span></li>
                              <li><span class="file"><a href="ch22s07.html" tabindex="1">Zombie Services</a></span></li>
                              <li><span class="file"><a href="ch22s08.html" tabindex="1">Using Notifications to Track the Plan and its Status</a></span><ul>
                                    <li><span class="file"><a href="ch22s08s01.html" tabindex="1">The plan-state-change Notification</a></span></li>
                                    <li><span class="file"><a href="ch22s08s02.html" tabindex="1">The service-commit-queue-event Notification</a></span></li>
                                    <li><span class="file"><a href="ch22s08s03.html" tabindex="1">
                                                     Examples of service-state-changes Stream Subscriptions
                                                   </a></span></li>
                                    <li><span class="file"><a href="ch22s08s04.html" tabindex="1">The trace-id in the Notification</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch22s09.html" tabindex="1">Developing and Updating a Nano Service</a></span><ul>
                                    <li><span class="file"><a href="ch22s09s01.html" tabindex="1">Adding Components</a></span></li>
                                    <li><span class="file"><a href="ch22s09s02.html" tabindex="1">Removing Components</a></span></li>
                                    <li><span class="file"><a href="ch22s09s03.html" tabindex="1">Replacing Components</a></span></li>
                                    <li><span class="file"><a href="ch22s09s04.html" tabindex="1">Adding and Removing States</a></span></li>
                                    <li><span class="file"><a href="ch22s09s05.html" tabindex="1">Modifying States</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.nano_services.impl.html" tabindex="1">Implementation Reference</a></span><ul>
                                    <li><span class="file"><a href="ch22s10s01.html" tabindex="1">Back-Tracking</a></span></li>
                                    <li><span class="file"><a href="ch22s10s02.html" tabindex="1">Behavior Tree</a></span></li>
                                    <li><span class="file"><a href="ch22s10s03.html" tabindex="1">Nano Service Pre-Condition</a></span></li>
                                    <li><span class="file"><a href="ch22s10s04.html" tabindex="1">Nano Service Opaque and Component Properties</a></span></li>
                                    <li><span class="file"><a href="ug.nano_services.callbacks.html" tabindex="1">Nano Service Callbacks</a></span></li>
                                    <li><span class="file"><a href="ch22s10s06.html" tabindex="1">Generic Service Callbacks</a></span></li>
                                    <li><span class="file"><a href="ch22s10s07.html" tabindex="1">Nano Service Pre/Post Modifications</a></span></li>
                                    <li><span class="file"><a href="ch22s10s08.html" tabindex="1">Forced Commits</a></span></li>
                                    <li><span class="file"><a href="ch22s10s09.html" tabindex="1">Plan Location</a></span></li>
                                    <li><span class="file"><a href="ch22s10s10.html" tabindex="1">Nano Services and Commit Queue</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch22s11.html" tabindex="1">Graceful Link Migration Example</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.encryption_keys.html" tabindex="1">Encryption Keys</a></span><ul>
                              <li><span class="file"><a href="ch23s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch23s02.html" tabindex="1">Reading encryption keys using an external command</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.external_logging.html" tabindex="1">External Logging</a></span><ul>
                              <li><span class="file"><a href="ch24s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch24s02.html" tabindex="1">Enabling external log processing</a></span></li>
                              <li><span class="file"><a href="ch24s03.html" tabindex="1">Processing logs using an external command</a></span></li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>