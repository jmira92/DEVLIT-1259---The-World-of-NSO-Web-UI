"use strict";(self.webpackChunkwebui=self.webpackChunkwebui||[]).push([[687],{31687:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getValue=T,t.getValueCached=y,t.setValue=m,t.getValueThunk=t.setValueThunk=t.setCaseThunk=t.getCaseThunk=t.deleteThunk=t.deleteAllowNonExistsThunk=t.deleteLocalNodesThunk=t.deleteNodesThunk=t.deletePathsThunk=t.deleteNodeThunk=t.createThunk=t.createDisallowExistsThunk=t.createAllowExistsThunk=t.internalCreateThunk=t.existsThunk=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n(2752)),r=n(59557),o=n(40801),i=n(49562),s=n(92485),c=n(71447),u=n(14172),h=n(65050);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.exists,n=e.path,r=e.isActionInput,o=e.existsPath,i=e.funcs,s=void 0===i?{}:i,h=s.readThunk,l=void 0===h?c.read:h,d=s.existsFunc,p=void 0===d?a.exists:d;return async e=>{if(r)return await e((0,u.existsAction)(n,{exists:t})),Promise.resolve(void 0);e((0,u.existsPendingAction)(o||n));try{const t=(await e(l({path:n}))).th,a=await p({th:t,path:o||n});return e((0,u.existsAction)(n,a))}catch(t){return e((0,u.existsErrorAction)(n,t))}}};t.existsThunk=d;const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.data,r=e.funcs,o=void 0===r?{}:r,i=o.create,s=void 0===i?a.create:i,h=o.load,l=void 0===h?a.load:h,d=o.writeThunk,p=void 0===d?c.write:d;return async e=>{try{const a=(await e(p({path:t}))).th;return await s({th:a,path:t,data:n}),n&&await l({th:a,path:t,data:n,format:"json"}),e((0,u.createAction)(t,n))}catch(n){return e((0,u.createErrorAction)(t,n))}}};t.internalCreateThunk=p;const v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.data,a=e.funcs,r=void 0===a?{}:a,o=r.exists,i=void 0===o?d:o,s=r.create,c=void 0===s?p:s;return async e=>(await e(i({path:t}))).exists?Promise.resolve():e(c({path:t,data:n}))};t.createAllowExistsThunk=v,t.createDisallowExistsThunk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.data,r=e.funcs,o=void 0===r?{}:r,i=o.create,s=void 0===i?p:i,u=o.existsFunc,h=void 0===u?a.exists:u,l=o.readThunk,d=void 0===l?c.read:l;return async e=>{try{const a=(await e(d({path:t}))).th;return(await h({th:a,path:t})).exists?{error:`The element ${t} already exists.`}:e(s({path:t,data:n}))}catch(e){return{error:e.message}}}},t.createThunk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.caseAncestors,n=e.dependants,a=e.path,o=e.data,i=e.funcs,c=void 0===i?{}:i,h=c.createAllowExists,l=void 0===h?v:h,d=c.reEvaluateSchemaThunk,p=void 0===d?s.reEvaluateSchemaThunk:d;return async e=>{await e(l({path:a,data:o})),n&&await e(p(n)),t&&t.forEach((t=>e((0,u.setCaseCompleteAction)((0,r.getParentPath)(t),(0,r.getLeafName)(t)))))}};const f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.deleteChildren,r=e.funcs,o=void 0===r?{}:r,i=o.deleteNode,s=void 0===i?a.deleteNode:i,h=o.writeThunk,l=void 0===h?c.write:h;return async e=>{try{const a=(await e(l({path:t}))).th,r=await s({th:a,path:t});if(r&&r.warnings)throw new Error(r.warnings.join(" "));return e(n?(0,u.deleteNodeAndChildrenAction)(t):(0,u.deleteAction)(t))}catch(n){return e((0,u.deleteErrorAction)(t,n))}}};t.deleteNodeThunk=f;const g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.paths,r=e.isActionInput,i=e.funcs,s=void 0===i?{}:i,h=s.deleteNodes,l=void 0===h?a.deleteNodes:h,d=s.writeThunk,p=void 0===d?c.write:d;return async(e,a)=>{try{let i;if(r){const e=await a().transactions.trans;i=(0,o.pathToObjects)(t).reduce(((t,n)=>{const a=n.path,r=Object.keys(e).find((t=>e[t].actionPath===a));return void 0!==r?e[r].th:t}),void 0)}void 0===i&&(i=(await e(p({path:t}))).th);const s=await l({th:i,paths:n}),c=s.reduce(((e,t)=>(t.warnings&&e.push(t.warnings),e)),[]),h=s.reduce(((e,t,a)=>(t.warnings||e.push(n[a]),e)),[]);if(c.length>0)throw h.length>0&&e((0,u.deletePathsAction)(h)),new Error(c.join(" "));return e((0,u.deletePathsAction)(h))}catch(n){return e((0,u.deleteErrorAction)(t,n))}}};t.deletePathsThunk=g,t.deleteNodesThunk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependants,n=e.isActionInput,a=e.path,r=e.paths,o=e.loadingPath,i=e.funcs,c=void 0===i?{}:i,h=c.reEvaluateSchemaThunk,l=void 0===h?s.reEvaluateSchemaThunk:h;return async e=>{e((0,u.deleteStartAction)(o));const i=await e(g({path:a,paths:r,isActionInput:n}));return e((0,u.deleteCompleteAction)(o)),t&&e(l(t)),i}},t.deleteLocalNodesThunk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.paths;return e=>Promise.all(t.map((t=>e((0,u.deleteAction)(t)))))};const w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.deleteChildren,a=e.funcs,r=void 0===a?{}:a,o=r.exists,i=void 0===o?d:o,s=r.deleteNode,c=void 0===s?f:s;return async e=>(await e(i({path:t}))).exists?e(c({path:t,deleteChildren:n})):Promise.resolve()};t.deleteAllowNonExistsThunk=w;const k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.caseAncestors,n=e.deleteChildren,a=e.dependants,o=e.path,i=e.funcs,c=void 0===i?{}:i,h=c.reEvaluateSchemaThunk,l=void 0===h?s.reEvaluateSchemaThunk:h,d=c.deleteAllowNonExists,p=void 0===d?w:d;return async e=>{e((0,u.deleteStartAction)(o)),await e(p({path:o,deleteChildren:n})),a&&await e(l(a)),t&&t.forEach((t=>e((0,u.setCaseCompleteAction)((0,r.getParentPath)(t),(0,r.getLeafName)(t))))),e((0,u.deleteCompleteAction)(o))}};t.deleteThunk=k;const A=e=>e.substring(0,e.lastIndexOf("/"));function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.funcs,r=void 0===n?{}:n,o=r.jsonrpc,i=void 0===o?a.default:o,s=r.readThunk,h=void 0===s?c.read:s;return t=>(t((0,u.getValuePendingAction)(e)),t(h({path:e})).then((n=>{let a=n.th;return i("get_value",{th:a,path:e}).then((n=>t((0,u.getValueAction)(e,n.value))))})).catch((n=>{"data.not_found"===n.type?t((0,u.getValueAction)(e,void 0)):t((0,u.getValueErrorAction)(e,n))})))}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.funcs,r=void 0===a?{}:a,o=r.getValue,i=void 0===o?T:o;return(n,a)=>{const r=(0,h.selectNode)(a(),e);return!t&&Object.keys(r).indexOf("value")>-1&&!r.isDeleted?Promise.resolve(n((0,u.getValueAction)(e,r.value))):n(i(e))}}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.funcs,o=void 0===r?{}:r,i=o.jsonrpc,s=void 0===i?a.default:i,h=o.writeThunk,l=void 0===h?c.write:h;return n=>(n((0,u.setValueStartAction)(e,t)),n(l({path:e})).then((a=>{let r=a.th;return s("set_value",{th:r,path:e,value:t}).then((()=>n((0,u.setValueAction)(e,t)))).catch((a=>{a&&a.data&&'"" is not a valid value.'===a.data.reason?(n(k({caseAncestors:null,dependants:null,path:e})),n((0,u.setValueInterruptAction)(e))):n((0,u.setValueErrorAction)(e,t,a))}))})))}t.getCaseThunk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.schemapath,n=e.nodepath,r=e.choice,o=e.funcs,i=void 0===o?{}:o,s=i.getCase,h=void 0===s?a.getCase:s,l=i.readThunk,d=void 0===l?c.read:l;return async e=>{const a=A(n||t),o=`${a}/${r}`;e((0,u.getCaseStartAction)(o));try{const t=(await e(d({path:a}))).th,n=await h({th:t,path:a,choice:r});return e((0,u.getCaseCompleteAction)(o,n.case))}catch(t){return e((0,u.getCaseErrorAction)(o,t))}}},t.getValueThunk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isConfigFalseCallpoint,n=e.path,a=e.funcs,r=void 0===a?{}:a,o=r.getValueCached,i=void 0===o?y:o;return async e=>{await e(i(n,t))}},t.setCaseThunk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.parentNodepath,a=e.value,r=e.funcs,o=void 0===r?{}:r,s=o.getSchema,c=void 0===s?i.getSchema:s;return async e=>{await e(c({path:n})),await e((0,u.setCaseCompleteAction)(t,a))}},t.setValueThunk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.caseAncestors,n=e.dependants,a=e.path,o=e.value,i=e.funcs,c=void 0===i?{}:i,h=c.reEvaluateSchemaThunk,l=void 0===h?s.reEvaluateSchemaThunk:h,d=c.setValue,p=void 0===d?m:d;return async e=>{await e(p(a,o)),n&&await e(l(n)),t&&t.forEach((t=>e((0,u.setCaseCompleteAction)((0,r.getParentPath)(t),(0,r.getLeafName)(t)))))}}},49562:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSchema=t.getSchemaStartAction=t.getSchemaErrorAction=t.getSchemaCompleteAction=void 0;var a=n(96994),r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(77283));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.getSchemaCompleteAction=(e,t,n)=>({type:r.GET_SCHEMA_COMPLETE,path:e,schema:t,queryPath:n}),t.getSchemaErrorAction=(e,t)=>({type:r.GET_SCHEMA_ERROR,path:e,error:t}),t.getSchemaStartAction=(e,t)=>({type:r.GET_SCHEMA_START,path:e,reload:t}),t.getSchema=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.params,r=e.reload,o=e.funcs,i=void 0===o?{}:o,s=i.getSchema2,c=void 0===s?a.getSchema:s;return c({path:t,reload:r,params:n})}}}]);