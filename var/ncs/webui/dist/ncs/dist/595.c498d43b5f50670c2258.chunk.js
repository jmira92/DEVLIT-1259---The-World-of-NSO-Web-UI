"use strict";(self.webpackChunkwebui=self.webpackChunkwebui||[]).push([[595],{68878:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67294)),l=n(a(45697));function n(e){return e&&e.__esModule?e:{default:e}}const s=e=>{let t=e.color;return r.default.createElement("svg",{version:"1.2",baseProfile:"tiny",x:"0px",y:"0px",viewBox:"0 0 24 21",xmlSpace:"preserve"},r.default.createElement("path",{fill:t,d:"M12.7,0.5c-0.4-0.7-1.1-0.7-1.5,0L0.2,19.7C-0.2,20.4,0.1,21,0.9,21h22.2 c0.8,0,1.2-0.6,0.8-1.3L12.7,0.5z M12.7,17.7C12.5,17.9,12.2,18,12,18c-0.3,0-0.5-0.1-0.7-0.3C11.1,17.5,11,17.2,11,17 c0-0.3,0.1-0.5,0.3-0.7c0.4-0.4,1.1-0.4,1.4,0c0.2,0.2,0.3,0.5,0.3,0.7C13,17.2,12.9,17.5,12.7,17.7L12.7,17.7z M13,13.5 c0,0.6-0.5,1-1,1s-1-0.5-1-1v-6c0-0.6,0.5-1,1-1s1,0.5,1,1V13.5L13,13.5z"}))};s.propTypes={color:l.default.string};var o=s;t.default=o},71688:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(a(67294)),l=u(a(45697)),n=a(43488),s=u(a(49205)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=l?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}(a(72377)),i=u(a(57937));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}const d=e=>{let t=e.name,a=e.title,l=e.symbol,c=e.items,u=e.isLoading,d=e.children;const m=(c||[]).map(((e,t)=>e.path?r.default.createElement(n.Link,{to:e.path,key:t,"data-handle":`item-${e.name}`,style:i.default.itemLink},r.default.createElement("div",{style:i.default.itemName},e.name),r.default.createElement("div",{style:i.default.itemValue},e.value)):r.default.createElement("div",{key:t,"data-handle":`item-${e.name}`,style:i.default.item},r.default.createElement("div",{style:i.default.itemName},e.name),r.default.createElement("div",{style:i.default.itemValue},e.value))));return r.default.createElement("div",{"data-handle":`data-widget-${t}`,style:i.default.widget},r.default.createElement("div",{style:i.default.header},r.default.createElement("div",{style:i.default.titleContainer},r.default.createElement("div",{style:i.default.symbol},l),r.default.createElement("span",{style:i.default.title,"data-handle":"title"},a)),u&&r.default.createElement("div",{style:i.default.loader},r.default.createElement(s.default,{color:o.color3})),r.default.createElement("div",{style:u?{...i.default.value,visibility:"hidden"}:i.default.value,"data-handle":"value"},d)),m.length>0&&r.default.createElement("div",{"data-handle":"items",style:i.default.items},m))};d.propTypes={name:l.default.string,symbol:l.default.shape({}),title:l.default.string,items:l.default.arrayOf(Object),isLoading:l.default.bool,children:l.default.oneOfType([l.default.number,l.default.string,l.default.object])};var m=d;t.default=m},57937:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}(a(72377));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const n={display:"flex",flexWrap:"nowrap",justifyContent:"space-between",lineHeight:"1.63",fontSize:r.medium3};var s={widget:{minWidth:"20rem",margin:"1rem",backgroundColor:r.color3},header:{backgroundColor:r.color2,paddingTop:"1.625rem",paddingLeft:"1.2rem",paddingBottom:"1rem",...r.fontCondensed},item:n,itemLink:{...n,textDecoration:"none",color:"inherit"},loader:{position:"absolute",marginTop:"3rem"},itemName:{},itemValue:{paddingLeft:"0.4rem"},value:{color:r.color1,fontSize:r.huge1,marginTop:"1rem"},titleContainer:{display:"flex"},symbol:{width:"1.4375rem",height:"1.4375rem",alignSelf:"center",margin:"0 0.625rem"},title:{fontSize:r.medium2,color:r.textColor3,display:"inline",alignSelf:"center"},items:{padding:"1rem"},percentageItem:{percentage:{marginLeft:"0.15rem"}}};t.default=s},58595:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._buildAlarmsOfSeverity=t._mapStateToProps=t._mapDispatchToProps=t._AlarmWidgetContainer=t.default=t._buildSummary=t.buildSummary=void 0;var r=v(a(67294)),l=v(a(45697)),n=a(36247),s=v(a(68878)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=l?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}(a(72377)),i=a(59557),c=a(98883),u=a(43801),d=v(a(71688)),m=a(75041),f=a(825),p=a(68613),A=v(a(5812));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function v(e){return e&&e.__esModule?e:{default:e}}const h=(0,u.getLinkWithPath)("/al:alarms/alarm-list/alarm"),g=e=>{if(Array.isArray(e))return e.map((e=>{let t=`{${(0,c.quoteKey)(e.device)} `;t+=`${(0,c.quoteKey)(e.type)} `,t+=`${(0,c.quoteKey)(e["managed-object"])} `,t+=`${(0,c.quoteKey)(e["specific-problem"])}}`;const a=(0,i.escapeKey)(`${h}${t}`);return{name:e.device,value:e.type,path:a}}))};t._buildAlarmsOfSeverity=g;const S=(e,t,a,l,n)=>{if(e)return r.default.createElement("div",{style:l.customContent},["criticals","majors","minors"].map((s=>((e,t,a,l,n,s)=>{const o=e===a?{...n.alarmButton,backgroundColor:n[e]}:{...n.alarmButton,color:n[e]};return r.default.createElement("a",{style:o,"data-handle":`${e}-number`,role:"button",tabIndex:0,onClick:()=>{l(e)},key:e},t[e],r.default.createElement("span",{style:n.alarmSeverity},s&&e))})(s,e,t,a,l,n))))};t._buildSummary=t.buildSummary=S;class b extends r.default.Component{constructor(e){super(e),this.handleSelectAlarm=this.handleSelectAlarm.bind(this),this.onCometUpdate=this.onCometUpdate.bind(this),this.timeout=void 0}componentDidMount(){const e=this.props,t=e.onLoad,a=e.onSubscribe,r=e.selectedAlarm;a(this.onCometUpdate),t(),this.handleGetAlarms(r)}componentWillUnmount(){(0,this.props.onUnsubscribe)(this.onCometUpdate)}handleGetAlarms(e){(0,this.props.onGetAlarms)(e?e.slice(0,-1):["critical","major","minor"])}handleSelectAlarm(e){const t=this.props,a=t.selectedAlarm===e?"":e;(0,t.onSelectAlarm)(a),this.handleGetAlarms(a)}onCometUpdate(){const e=this.props,t=e.onLoad,a=e.selectedAlarm;clearTimeout(this.timeout),this.timeout=setTimeout((()=>{t(),this.handleGetAlarms(a)}),500)}render(){const e=this.props,t=e.alarmList,a=e.alarmSummary,l=e.isLoading,n=e.selectedAlarm;let i=[];const c=r.default.createElement("div",{style:{visibility:l?"hidden":"visible"}},S(a,n,this.handleSelectAlarm,A.default));return l||(i=g(t)),r.default.createElement(d.default,{symbol:r.default.createElement(s.default,{color:o.textColor3}),items:i,name:"alarms",title:"ALARMS",isLoading:l},c)}}t._AlarmWidgetContainer=b;const _=["/al:alarms/alarm-list/alarm"],O=e=>({onLoad:()=>e((0,m.getAlarmSummary)()),onSelectAlarm(t){e((0,m.setSelectedAlarmAction)(t))},onGetAlarms:t=>e((0,m.getAlarms)({severity:t,chunkSize:25})),onSubscribe(t){e((0,p.subscribeCdbOperAction)(_,t))},onUnsubscribe(t){e((0,p.unsubscribeCdbOperAction)(_,t))}});t._mapDispatchToProps=O,b.defaultProps={isLoading:!0,alarmList:[]},b.propTypes={onLoad:l.default.func.isRequired,onGetAlarms:l.default.func.isRequired,onSubscribe:l.default.func.isRequired,onUnsubscribe:l.default.func.isRequired,onSelectAlarm:l.default.func,selectedAlarm:l.default.string,isLoading:l.default.bool,alarmList:l.default.arrayOf(l.default.shape({})),alarmSummary:l.default.shape(Object)};const E=e=>({alarmList:(0,f.selectAlarmListResult)(e),alarmSummary:(0,f.selectAlarmSummaryResults)(e),isLoading:(0,f.selectAlarmListIsLoading)(e)||(0,f.selectAlarmSummaryIsLoading)(e),selectedAlarm:(0,f.selectSelectedAlarm)(e)});t._mapStateToProps=E;var L=(0,n.connect)(E,O)(b);t.default=L},5812:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}(a(72377));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}var n={customContent:{fontSize:r.huge1,display:"flex",justifyContent:"space-around",margin:"-0.5rem 0.5rem -0.5rem -0.5rem"},alarmButton:{color:r.color2,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer"},criticals:r.color5,majors:r.color15,minors:r.color1,warnings:r.color1,indeterminates:r.color1};t.default=n},75041:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getXpathExpr=t.runAlarmActionThunk=t.getAlarmSummary=t.getDevices=t.getAlarms=t.setSelectedAlarmAction=t.showClearedAlarmsAction=t.selectAlarmRowsAction=t.setAlarmExpandedAction=t.getAlarmSummaryErrorAction=t.getAlarmSummaryCompleteAction=t.getAlarmSummaryStartAction=t.getDevicesCompleteAction=t.getDevicesErrorAction=t.getDevicesStartAction=t.getAlarmsErrorAction=t.getAlarmsCompleteAction=t.getAlarmsStartAction=void 0;var r=a(2752),l=a(71447),n=a(28153),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=l?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}(a(86173));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}const i=()=>({type:s.GET_ALARMS_START});t.getAlarmsStartAction=i;const c=(e,t,a,l)=>{const n=(0,r.zipQueryResult)(t,e.results);return{type:s.GET_ALARMS_COMPLETE,alarmList:{...e,results:n},columnKey:a,sortOrder:l}};t.getAlarmsCompleteAction=c;const u=e=>({type:s.GET_ALARMS_ERROR,error:e});t.getAlarmsErrorAction=u;const d=()=>({type:s.GET_DEVICES_START});t.getDevicesStartAction=d;const m=e=>({type:s.GET_DEVICES_ERROR,error:e});t.getDevicesErrorAction=m;const f=e=>({type:s.GET_DEVICES_COMPLETE,devices:e});t.getDevicesCompleteAction=f;const p=()=>({type:s.GET_ALARM_SUMMARY_START});t.getAlarmSummaryStartAction=p;const A=e=>({type:s.GET_ALARM_SUMMARY_COMPLETE,values:e});t.getAlarmSummaryCompleteAction=A;const y=e=>({type:s.GET_ALARM_SUMMARY_ERROR,error:e});t.getAlarmSummaryErrorAction=y,t.setAlarmExpandedAction=(e,t)=>({type:s.SET_EXPANDED_ROW,path:e,isExpanded:t}),t.selectAlarmRowsAction=(e,t)=>({type:s.SELECT_ALARM_ROWS,alarmNames:t,isSelected:e}),t.showClearedAlarmsAction=()=>({type:s.SHOW_CLEARED_ALARMS});const v=(e,t,a)=>{const r=[];if(e){const t=(Array.isArray(e)?e:[e]).map((e=>`last-perceived-severity="${e}"`)).join(" or ");r.push(`(${t})`)}if(t||r.push('is-cleared="false"'),a&&r.push(`device="${a}"`),0!==r.length)return`alarm[${r.join(" and ")}]`};t._getXpathExpr=v,t.setSelectedAlarmAction=e=>({type:s.SET_SELECTED_ALARM,severity:e}),t.getAlarms=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chunkSize,a=e.offset,n=e.columnKey,s=e.sortOrder,o=e.severity,d=e.showClearedAlarms,m=e.selectedDevice,f=e.funcs,p=void 0===f?{}:f,A=p.query,y=void 0===A?r.query:A,h=p.readThunk,g=void 0===h?l.read:h;return async(e,r)=>{const l=v(o,d,m),f=["device","type","managed-object","last-perceived-severity","is-cleared","specific-problem","last-alarm-text","alarm-handling[last()]/state","status-change/event-time","last-status-change","count(status-change/event-time)"];e(i());try{const o=(await g()(e,r)).th,i=await y({th:o,selection:f,path:"/alarms/alarm-list/alarm",sort:n,sortOrder:s,initialOffset:a,chunkSize:t,resultAs:"string",xpathExpr:l,contextNode:"/alarms/alarm-list"});return e(c(i,f,n,s))}catch(t){return e(u(t))}}},t.getDevices=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchInput,a=e.funcs,n=void 0===a?{}:a,s=n.query,o=void 0===s?r.query:s,i=n.readThunk,c=void 0===i?l.read:i;return async(e,a)=>{e(d());try{const r=(await c()(e,a)).th,l=await o({th:r,path:"/ncs:devices/device",selection:["name"],chunkSize:20,xpathExpr:t&&`device[contains(name, "${t}")]`,contextNode:"/ncs:devices"});return e(f(l.results.flat()))}catch(t){return e(m(t))}}},t.getAlarmSummary=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.funcs,a=void 0===t?{}:t,n=a.getValues,s=void 0===n?r.getValues:n,o=a.readThunk,i=void 0===o?l.read:o;return async(e,t)=>{e(p());try{const a="/alarms/summary/",r=["criticals","majors","minors","warnings","indeterminates"],l=(await i()(e,t)).th,n=(await s({th:l,path:a,leafs:r})).values.reduce(((e,t,a)=>(e[r[a]]=t.value,e)),{});return e(A(n))}catch(t){return e(y(t))}}},t.runAlarmActionThunk=e=>{let t=e.action,a=e.alarmPath,r=e.funcs,l=(void 0===r?{}:r).runCustomActionThunk,s=void 0===l?n.runCustomActionThunk:l;const o=(e=>{let t=e.action,a=e.alarmPath;return"acknowledge"===t?{actionPath:`${a}/${t}`,executePath:`${a}/handle-alarm`}:"purge cleared"===t?{actionPath:`${a}/${t}`,executePath:`${a}/purge-alarms`}:{actionPath:`${a}/${t}`}})({action:t,alarmPath:a});return s({action:t,actionPath:o.actionPath,executePath:o.executePath})}},38201:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ALARM_COLUMNS_SELECTION=t.ALARM_ACTION_COLUMNS=t.ALARM_COLUMNS=t.ALARM_MANAGER_USER_STORAGE_PATH=void 0,t.ALARM_MANAGER_USER_STORAGE_PATH="ALARM_MANAGER_USER_STORAGE_PATH";const a=[{key:"type",title:"type"},{key:"device",title:"device"},{key:"is-cleared",title:"is-cleared"},{key:"alarm-handling[last()]/state",title:"last-state"},{key:"last-perceived-severity",title:"severity"},{key:"last-alarm-text",title:"last-message"},{key:"status-change/event-time",title:"created"},{key:"last-status-change",title:"last-status-change"},{key:"count(status-change/event-time)",title:"number-of-status-change"}];t.ALARM_COLUMNS=a;const r={key:"acknowledge",title:"acknowledge"};t.ALARM_ACTION_COLUMNS=r;const l=[...a,r].map((e=>({...e,canBeHidden:!0})));t.ALARM_COLUMNS_SELECTION=l},825:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.selectSelectedAlarm=t.selectShowClearedAlarms=t.selectTotalNumberOfAlarms=t.selectAlarmSortOrder=t.selectAlarmSortColumn=t.selectAlarmOffset=t.selectSelectedAlarmRows=t.selectDeviceOptions=t.selectDeviceList=t.selectDevicesIsLoading=t.selectDevices=t.selectAlarmRows=t.selectAlarmRowsSelection=t.selectExpandedRows=t.selectAlarmSummaryResults=t.selectAlarmSummaryIsLoading=t.selectAlarmSummary=t.selectAlarmListResult=t.selectAlarmListIsLoading=t.selectAlarmList=t.selectAlarmColumns=void 0;var r=a(22222),l=a(98883),n=a(7711),s=a(59235),o=a(81951),i=a(38201),c=a(34452);const u=Object.freeze({}),d=Object.freeze([]),m=e=>(0,c.timeStampToRelativeTimeString)(Date.parse(e)),f={path:i.ALARM_MANAGER_USER_STORAGE_PATH},p=(0,o.createColumnsVisibilitySelector)();t.selectAlarmColumns=e=>p(e,f);const A=e=>e.alarms.alarms||u;t.selectAlarmList=A,t.selectAlarmListIsLoading=e=>A(e).isLoading;const y=(0,r.createSelector)(A,(e=>Array.isArray(e.results)?e.results:d));t.selectAlarmListResult=y;const v=e=>e.alarms.summary||u;t.selectAlarmSummary=v,t.selectAlarmSummaryIsLoading=e=>v(e).isLoading,t.selectAlarmSummaryResults=e=>v(e).summary;const h=e=>A(e).expandedRows||u;t.selectExpandedRows=h;const g=e=>A(e).selectedRows||u;t.selectAlarmRowsSelection=g;const S=(0,r.createSelector)(y,s.selectYangActions,g,h,((e,t,a,r)=>e.map((e=>{const o=(e=>{let t=`{${(0,l.quoteKey)(e.device)} `;return t+=`${(0,l.quoteKey)(e.type)} `,t+=`${(0,l.quoteKey)(e["managed-object"])} `,t+=`${(0,l.quoteKey)(e["specific-problem"])}}`,`${n.alarmsPath}${t}`})(e),i={acknowledge:t[`${o}/acknowledge`]},c=(e=>Object.keys(e).reduce(((t,a)=>({...t,[a]:{status:(0,s.getActionStatus)(e,a,s.getAcknowledgeStatus).actionStatus,yangAction:{...e[a]}}})),{}))(i);c.acknowledge.isExpanded=r[o];const u=a[o]||{};return{rowKey:o,data:{...e,...u,...c,"last-status-change":m(e["last-status-change"]),"status-change/event-time":m(e["status-change/event-time"]),expandable:{isExpanded:r[o],yangAction:{...i.acknowledge,actionStatus:c.acknowledge}}}}}))));t.selectAlarmRows=S;const b=e=>e.alarms.devices||u;t.selectDevices=b,t.selectDevicesIsLoading=e=>b(e).isLoading;const _=e=>b(e).devices||d;t.selectDeviceList=_,t.selectDeviceOptions=e=>_(e).map((e=>({value:e,text:e})));const O=(0,r.createSelector)(S,(e=>e.filter((e=>e.data.isSelected))));t.selectSelectedAlarmRows=O,t.selectAlarmOffset=e=>A(e).current_position,t.selectAlarmSortColumn=e=>A(e).sortColumn,t.selectAlarmSortOrder=e=>A(e).sortOrder,t.selectTotalNumberOfAlarms=e=>A(e).total_number_of_results,t.selectShowClearedAlarms=e=>A(e).showClearedAlarms,t.selectSelectedAlarm=e=>A(e).selectedAlarm}}]);