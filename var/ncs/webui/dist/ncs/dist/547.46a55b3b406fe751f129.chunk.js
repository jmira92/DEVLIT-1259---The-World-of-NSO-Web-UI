"use strict";(self.webpackChunkwebui=self.webpackChunkwebui||[]).push([[547],{7833:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),r=s(a(45697)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(72377));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function s(e){return e&&e.__esModule?e:{default:e}}const u=e=>{let t=e.backgroundColor,a=e.circleRadius,r=e.verticalSpacing,l=e.width,s=e.components;const u=s.reduce(((e,t)=>(e.total+=t.statusStats.all,e.green+=t.statusStats.reached,e.orange+=t.statusStats["not-reached"],e)),{total:0,green:0,orange:0}),i=2*Math.PI*a,c=u.green/u.total,p=1===c?0:c*i,d=`${p} 1000`,f=`0 ${p} ${u.orange/u.total*i} 1000`,m=Math.max(r*(s.length-1),2*a),g=s.length>1?r:0,h=s[0].statusStats.all>s[0].statusStats.reached?o.color15:o.color14;return n.default.createElement("svg",{version:"1.2",baseProfile:"tiny",x:"0px",y:"0px",width:l,height:m,viewBox:`0 0 ${l} ${m}`,xmlSpace:"preserve",pointerEvents:"none"},n.default.createElement("g",{fill:"none",strokeWidth:"3"},s.length&&(s.length<2?n.default.createElement("line",{x1:a,y1:.5*m,x2:l,y2:.5*m,stroke:h}):s.map(((e,t)=>{const r=a,s=.5*m,u=l-a,i=.5*m-g*t,c=i>0,p=e.statusStats.all>e.statusStats.reached?o.color15:o.color14,d=`M ${r} ${s} A ${u}, ${Math.abs(i)}, 0, 0,\n                    ${c?1:0}, ${l}, ${g*t}`;return n.default.createElement("path",{key:`arc${t}`,d,stroke:p})})))),n.default.createElement("circle",{cx:a,cy:.5*m,stroke:t,strokeWidth:3,r:a+1.5,fill:u.total>u.green?o.color15:o.color14}),n.default.createElement("circle",{cx:a,cy:.5*m,r:a-2.5,fill:"none",stroke:o.color14,strokeOpacity:"0.5",strokeDasharray:d,transform:`rotate(-90 ${a} ${.5*m})`,strokeWidth:5}),n.default.createElement("circle",{cx:a,cy:.5*m,r:a-2.5,fill:"none",stroke:o.color3,strokeOpacity:"0.5",strokeDasharray:f,transform:`rotate(-90 ${a} ${.5*m})`,strokeWidth:5}),n.default.createElement("text",{x:a,y:.5*m+8,textAnchor:"middle",fontFamily:o.font2,fill:o.textColor4,fontSize:o.large1},`${u.green}/${u.total}`))};u.propTypes={backgroundColor:r.default.string,circleRadius:r.default.number,components:r.default.arrayOf(r.default.object),verticalSpacing:r.default.number,width:r.default.number},u.defaultProps={circleRadius:45,verticalSpacing:96,width:150};var i=u;t.default=i},69036:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=u,t._getIsBackTracking=void 0;var n=l(a(67294)),r=l(a(45697)),o=l(a(79790));function l(e){return e&&e.__esModule?e:{default:e}}const s=e=>{const t=e.map((e=>e.backTrack)),a=t.every((e=>"true"===e));return t.length>0&&a};function u(e){let t=e.components;return s(t)?n.default.createElement("div",{style:o.default.container,"data-handle":"back-tracking"},n.default.createElement("span",{style:o.default.arrow}),n.default.createElement("span",{style:o.default.text},"Back-tracking")):null}t._getIsBackTracking=s,u.propTypes={components:r.default.arrayOf(r.default.shape({}))}},79790:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=o?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(n,l,s):n[l]=e[l]}return n.default=e,a&&a.set(e,n),n}(a(72377));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}var o={container:{color:n.color3,backgroundColor:n.color10,padding:"0 0.7rem",display:"inline-flex",alignItems:"center",position:"relative",height:"1.8rem",boxSizing:"border-box",margin:"0.3rem 1.6rem 0"},arrow:{position:"absolute",top:"0",borderTop:"0.9rem solid transparent",borderBottom:"0.9rem solid transparent",right:"100%",borderRight:`0.9rem solid ${n.color10}`},text:{lineHeight:"1.4rem",fontSize:"0.8rem"}};t.default=o},45129:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PlanComponent=t.States=void 0;var n=c(a(67294)),r=c(a(45697)),o=c(a(75311)),l=c(a(49205)),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=r?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(76805)),u=c(a(7833));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}const p=e=>{let t=e.states,a=e.LinkComponent;return n.default.createElement("div",{"data-handle":"states",style:s.default.statesWrapper},t.reduce(((e,t,r)=>(e.push(n.default.createElement("div",{key:`line-${t.name}`,style:(0,s.setStatus)(r?s.default.line:s.default.firstLine,t.status)})),e.push(n.default.createElement(a,{key:`state-${t.name}`,"data-handle":`state-${t.name}-${t.status}`,style:s.default.stateWrapper,to:t.to},n.default.createElement("div",{style:(0,s.getStateStyle)(t.status)}),n.default.createElement("div",{style:s.default.label},t.name))),e)),[]))};t.States=p,p.propTypes={states:r.default.arrayOf(r.default.shape({name:r.default.string,status:r.default.string})),LinkComponent:r.default.elementType},p.defaultProps={LinkComponent:o.default};const d=e=>{let t=e.name,a=e.states,r=e.status,o=e.statusStats,l=e.to,u=e.LinkComponent;return n.default.createElement("div",{"data-handle":`component-${t}-${r}`,style:s.default.componentWrapper},n.default.createElement(u,{key:"component-graph",style:s.default.componentStatusWrapper,to:l},n.default.createElement("div",{style:(0,s.getComponentStyle)(r)},`${o.reached}/${o.all}`),n.default.createElement("div",{style:s.default.firstLabel},t)),n.default.createElement(p,{LinkComponent:u,states:a}))};t.PlanComponent=d,d.propTypes={name:r.default.string,states:r.default.arrayOf(r.default.shape({name:r.default.string,status:r.default.string})),status:r.default.string,statusStats:r.default.shape(Object),to:r.default.string,LinkComponent:r.default.elementType},d.defaultProps={LinkComponent:o.default};const f=e=>{let t=e.components,a=e.path,r=e.isLoading,o=e.LinkComponent,i=e.backgroundColor;return n.default.createElement("div",{style:s.default.wrapperWrapper},n.default.createElement("div",{"data-handle":`kplan-${a}`,style:s.default.planWrapper},t.length>0?n.default.createElement("div",{style:s.default.arcsWrapper},n.default.createElement(u.default,{components:t,backgroundColor:i})):n.default.createElement("div",{style:s.default.emptyMessage},"Plan is empty"),n.default.createElement("div",{"data-handle":`components-${a}`,style:1===t.length?s.default.componentsWrapperSingle:s.default.componentsWrapper},t.map((e=>{let t=e.name,a=e.states,r=e.status,l=e.statusStats,s=e.to;return n.default.createElement(d,{key:t||s,name:t,states:a,status:r,statusStats:l,to:s,LinkComponent:o})}))),r&&n.default.createElement("div",{style:s.default.loading},n.default.createElement(l.default,{color:s.default.loader.color}))))};f.propTypes={backgroundColor:r.default.string,components:r.default.arrayOf(r.default.shape(Object)).isRequired,isLoading:r.default.bool,path:r.default.string,LinkComponent:r.default.elementType},f.defaultProps={LinkComponent:o.default};var m=f;t.default=m},76805:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.setStatus=t.getPlanStyle=t.getComponentStyle=t.getStateStyle=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=o?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(n,l,s):n[l]=e[l]}return n.default=e,a&&a.set(e,n),n}(a(72377));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}const o=e=>({unknown:{...e,backgroundColor:n.color15},"not-reached":{...e,backgroundColor:n.color6},reached:{...e,backgroundColor:n.color14},failed:{...e,backgroundColor:n.color5}}),l={borderRadius:"50%",display:"flex",width:"50px",height:"50px",flexDirection:"column",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",flexShrink:0,color:n.backgroundColor1},s={...l,backgroundColor:n.color6,flexShrink:"0",width:"1.5rem",height:"1.5rem"},u={...l,width:"3rem",height:"3rem"},i={...l,width:"6rem",height:"6rem"},c={flexGrow:"1",height:"3px",backgroundColor:"red",margin:"1.5rem 0.25rem",minWidth:"5.5rem",borderRadius:"1.5px"},p={paddingTop:"0.75rem",fontSize:"0.7rem",color:n.color1,width:"7rem",alignSelf:"center",textAlign:"center",height:"4rem",overflow:"auto",lineHeight:"1.5"},d={flexGrow:"1",marginLeft:"-1.5rem"},f={wrapperWrapper:{padding:"0 0.7rem"},planWrapper:{display:"flex",paddingTop:"1rem",overflow:"auto",position:"relative"},arcsWrapper:{flexShrink:0,marginTop:"1.5rem"},componentsWrapper:d,componentsWrapperSingle:{...d,marginTop:"2.75rem",marginBottom:"0.75rem"},componentWrapper:{display:"flex",flexDirection:"row",height:"6rem"},componentStatusWrapper:{textDecoration:"none",display:"flex",flexDirection:"column",alignItems:"center",flexGrow:"0",flexShrink:"0",width:"3rem"},statesWrapper:{display:"flex",justifyContent:"space-between",paddingRight:"3rem",flexGrow:"1",flexWrap:"nowrap"},stateWrapper:{width:"1.5rem",display:"flex",marginTop:"0.8rem",flexDirection:"column",textDecoration:"none"},label:p,firstLabel:{...p,paddingTop:"0.5rem"},line:c,firstLine:{...c,flexGrow:"0",width:"4.5rem",marginTop:"1.5rem"},loading:{alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.7)",display:"flex",height:"100%",justifyContent:"center",left:"0",position:"absolute",top:"0",width:"100%",zIndex:0},loader:{color:n.color9},emptyMessage:{fontSize:n.medium2,color:n.color6,textAlign:"center",marginBottom:"1rem",width:"100%"},statesStatus:o(s),planStatus:o(i),componentStatus:o(u)},m=e=>t=>t in f[e]?f[e][t]:f[e].unknown,g=m("statesStatus");t.getStateStyle=g;const h=m("componentStatus");t.getComponentStyle=h;const y=m("planStatus");t.getPlanStyle=y,t.setStatus=(e,t)=>"not-reached"===t?{...e,backgroundColor:n.color6}:"reached"===t?{...e,backgroundColor:n.color14}:"failed"===t?{...e,backgroundColor:n.color5}:{...e,backgroundColor:n.color7};var b=f;t.default=b},31547:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._mapStateToProps=t._mapDispatchToProps=t._PlanContainer=t.default=void 0;var n=d(a(67294)),r=d(a(45697)),o=a(36247),l=a(43488),s=a(68613),u=a(67994),i=a(44854),c=d(a(45129)),p=d(a(69036));function d(e){return e&&e.__esModule?e:{default:e}}class f extends n.default.Component{constructor(e){super(e),this.refreshPlan=this.refreshPlan.bind(this)}componentDidMount(){const e=this.props,t=e.onLoad,a=e.onSubscribe,n=e.path;a(n,this.refreshPlan),t(n)}componentWillUnmount(){const e=this.props;(0,e.onUnsubscribe)(e.path,this.refreshPlan)}refreshPlan(){const e=this.props;(0,e.onLoad)(e.path)}render(){const e=this.props,t=e.backgroundColor,a=e.plan,r=e.path,o=e.isLoading,s=a.statusStats,u=a.status,i=a.components;return n.default.createElement("div",null,n.default.createElement(p.default,{components:i}),n.default.createElement(c.default,{backgroundColor:t,statusStats:s,path:r,isLoading:o,status:u,components:i,LinkComponent:l.Link}))}}t._PlanContainer=f,f.propTypes={backgroundColor:r.default.string,isLoading:r.default.bool,onLoad:r.default.func.isRequired,onSubscribe:r.default.func.isRequired,onUnsubscribe:r.default.func.isRequired,path:r.default.string.isRequired,plan:r.default.shape(Object)};const m=(e,t)=>({isLoading:(0,u.selectPlanLoading)(e,t.path),plan:(0,u.selectPlan)(e,t.path)});t._mapStateToProps=m;const g=e=>({onLoad(t){e((0,i.getPlanThunk)({path:t}))},onSubscribe(t,a){e((0,s.subscribeChangesAction)([t],a))},onUnsubscribe(t,a){e((0,s.unsubscribeChangesAction)([t],a))}});t._mapDispatchToProps=g;var h=(0,o.connect)(m,g)(f);t.default=h},44854:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPlanThunk=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(14172)),r=a(67994),o=a(96994);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const s=["name","type","back-track"],u=["name","status"];t.getPlanThunk=e=>{let t=e.path,a=e.funcs,l=void 0===a?{}:a,i=l.query,c=void 0===i?n.query:i,p=l.getSchema,d=void 0===p?o.getSchema:p;return async(e,a)=>{await e(d({path:t,reload:!1,single:!0}));const n=(0,r.getPlanComponentPath)(t),o=(0,r.getComponentKeys)(a(),n),l=await e(c({selection:s,path:n}));return Promise.all(l.result.results.map((a=>{const n=o.map((e=>a[e]));return e(c({selection:u,path:(0,r.getPlanComponentStatePath)(t,n)}))})))}}},67994:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.selectPlan=t.selectPlanComponents=t.getComponentKeys=t.selectPlanLoading=t.selectComponentStates=t.selectComponents=t.getPlanComponentStateKeyPath=t.getPlanComponentStatePath=t.getPlanComponentKeyPath=t.getPlanComponentPath=t.getStatusStats=t.getStatusFromStats=void 0;var n=a(84463),r=a(65050),o=a(98883),l=a(17223),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=r?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(39562)),u=a(83561);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}const c="failed",p="reached",d=e=>e.failed>0?c:e.all>0&&e.reached===e.all?p:"unknown";t.getStatusFromStats=d;const f=e=>e.reduce(((e,t)=>(e[t.status]=(e[t.status]||0)+1,e)),{[c]:0,[p]:0,"not-reached":0,all:e.length});t.getStatusStats=f;const m=e=>`${e}/component`;t.getPlanComponentPath=m;const g=(e,t)=>`${m(e)}{${t.map(o.quoteKey).join(" ")}}`;t.getPlanComponentKeyPath=g;const h=(e,t)=>`${g(e,t)}/state`;t.getPlanComponentStatePath=h;const y=(e,t,a)=>`${h(e,t)}{${(0,o.quoteKey)(a)}}`;t.getPlanComponentStateKeyPath=y;const b=(e,t)=>(0,r.selectRows)(e,m(t));t.selectComponents=b;const k=(e,t,a)=>(0,r.selectRows)(e,h(t,a));t.selectComponentStates=k,t.selectPlanLoading=(e,t)=>(0,r.selectLoading)(e,m(t));const P=(e,t)=>{const a=(0,l.selectSchema)(e,t);return s.getKeys(a)};t.getComponentKeys=P;const v=(e,t)=>{const a=P(e,m(t));return b(e,t).map((r=>{const o=r.name,l=a.map((e=>r[e])),s=k(e,t,l).map((e=>({...e,to:(0,n.selectLocationPathnameFromApplicationName)(u.CONFIGURATION_EDITOR_NAME,y(t,l,e.name))}))),i=f(s),c=d(i),p=(0,n.selectLocationPathnameFromPath)(e,g(t,l));return{name:o,backTrack:r["back-track"],states:s,statusStats:i,status:c,to:p}}))};t.selectPlanComponents=v,t.selectPlan=(e,t)=>{const a=v(e,t),n=f(a);return{components:a,statusStats:n,status:d(n)}}}}]);